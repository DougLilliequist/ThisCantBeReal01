parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"gELV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.length=t,exports.copy=n,exports.set=e,exports.add=o,exports.subtract=u,exports.multiply=s,exports.divide=a,exports.scale=c,exports.distance=i,exports.squaredDistance=p,exports.squaredLength=f,exports.negate=x,exports.inverse=v,exports.normalize=l,exports.dot=d,exports.cross=M,exports.lerp=h,exports.transformMat4=q,exports.scaleRotateMat4=g,exports.transformMat3=m,exports.transformQuat=y,exports.exactEquals=P,exports.angle=void 0;var r=1e-6;function t(r){var t=r[0],n=r[1],e=r[2];return Math.sqrt(t*t+n*n+e*e)}function n(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function e(r,t,n,e){return r[0]=t,r[1]=n,r[2]=e,r}function o(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}function u(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r}function s(r,t,n){return r[0]=t[0]*n[0],r[1]=t[1]*n[1],r[2]=t[2]*n[2],r}function a(r,t,n){return r[0]=t[0]/n[0],r[1]=t[1]/n[1],r[2]=t[2]/n[2],r}function c(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r}function i(r,t){var n=t[0]-r[0],e=t[1]-r[1],o=t[2]-r[2];return Math.sqrt(n*n+e*e+o*o)}function p(r,t){var n=t[0]-r[0],e=t[1]-r[1],o=t[2]-r[2];return n*n+e*e+o*o}function f(r){var t=r[0],n=r[1],e=r[2];return t*t+n*n+e*e}function x(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r}function v(r,t){return r[0]=1/t[0],r[1]=1/t[1],r[2]=1/t[2],r}function l(r,t){var n=t[0],e=t[1],o=t[2],u=n*n+e*e+o*o;return u>0&&(u=1/Math.sqrt(u)),r[0]=t[0]*u,r[1]=t[1]*u,r[2]=t[2]*u,r}function d(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}function M(r,t,n){var e=t[0],o=t[1],u=t[2],s=n[0],a=n[1],c=n[2];return r[0]=o*c-u*a,r[1]=u*s-e*c,r[2]=e*a-o*s,r}function h(r,t,n,e){var o=t[0],u=t[1],s=t[2];return r[0]=o+e*(n[0]-o),r[1]=u+e*(n[1]-u),r[2]=s+e*(n[2]-s),r}function q(r,t,n){var e=t[0],o=t[1],u=t[2],s=n[3]*e+n[7]*o+n[11]*u+n[15];return s=s||1,r[0]=(n[0]*e+n[4]*o+n[8]*u+n[12])/s,r[1]=(n[1]*e+n[5]*o+n[9]*u+n[13])/s,r[2]=(n[2]*e+n[6]*o+n[10]*u+n[14])/s,r}function g(r,t,n){var e=t[0],o=t[1],u=t[2],s=n[3]*e+n[7]*o+n[11]*u+n[15];return s=s||1,r[0]=(n[0]*e+n[4]*o+n[8]*u)/s,r[1]=(n[1]*e+n[5]*o+n[9]*u)/s,r[2]=(n[2]*e+n[6]*o+n[10]*u)/s,r}function m(r,t,n){var e=t[0],o=t[1],u=t[2];return r[0]=e*n[0]+o*n[3]+u*n[6],r[1]=e*n[1]+o*n[4]+u*n[7],r[2]=e*n[2]+o*n[5]+u*n[8],r}function y(r,t,n){var e=t[0],o=t[1],u=t[2],s=n[0],a=n[1],c=n[2],i=a*u-c*o,p=c*e-s*u,f=s*o-a*e,x=a*f-c*p,v=c*i-s*f,l=s*p-a*i,d=2*n[3];return i*=d,p*=d,f*=d,x*=2,v*=2,l*=2,r[0]=e+i+x,r[1]=o+p+v,r[2]=u+f+l,r}var b=function(){var r=[0,0,0],t=[0,0,0];return function(e,o){n(r,e),n(t,o),l(r,r),l(t,t);var u=d(r,t);return u>1?0:u<-1?Math.PI:Math.acos(u)}}();function P(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]}exports.angle=b;
},{}],"TrsQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vec3=void 0;var t=n(require("./functions/Vec3Func.js"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var o=i?Object.getOwnPropertyDescriptor(t,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=t[u]}return r.default=t,n&&n.set(t,r),r}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function c(t){var e=y();return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||!p(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return h(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,t)})(t)}function h(t,e,n){return(h=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&v(i,n.prototype),i}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(e){s(r,l(Array));var n=c(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return i(this,r),a(t=n.call(this,e,u,o),f(t))}return o(r,[{key:"set",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(t.set(this,e,n,r),this)}},{key:"copy",value:function(e){return t.copy(this,e),this}},{key:"add",value:function(e,n){return n?t.add(this,e,n):t.add(this,this,e),this}},{key:"sub",value:function(e,n){return n?t.subtract(this,e,n):t.subtract(this,this,e),this}},{key:"multiply",value:function(e){return e.length?t.multiply(this,this,e):t.scale(this,this,e),this}},{key:"divide",value:function(e){return e.length?t.divide(this,this,e):t.scale(this,this,1/e),this}},{key:"inverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.inverse(this,e),this}},{key:"len",value:function(){return t.length(this)}},{key:"distance",value:function(e){return e?t.distance(this,e):t.length(this)}},{key:"squaredLen",value:function(){return t.squaredLength(this)}},{key:"squaredDistance",value:function(e){return e?t.squaredDistance(this,e):t.squaredLength(this)}},{key:"negate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.negate(this,e),this}},{key:"cross",value:function(e,n){return n?t.cross(this,e,n):t.cross(this,this,e),this}},{key:"scale",value:function(e){return t.scale(this,this,e),this}},{key:"normalize",value:function(){return t.normalize(this,this),this}},{key:"dot",value:function(e){return t.dot(this,e)}},{key:"equals",value:function(e){return t.exactEquals(this,e)}},{key:"applyMatrix4",value:function(e){return t.transformMat4(this,this,e),this}},{key:"scaleRotateMatrix4",value:function(e){return t.scaleRotateMat4(this,this,e),this}},{key:"applyQuaternion",value:function(e){return t.transformQuat(this,this,e),this}},{key:"angle",value:function(e){return t.angle(this,e)}},{key:"lerp",value:function(e,n){return t.lerp(this,this,e,n),this}},{key:"clone",value:function(){return new r(this[0],this[1],this[2])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"transformDirection",value:function(t){var e=this[0],n=this[1],r=this[2];return this[0]=t[0]*e+t[4]*n+t[8]*r,this[1]=t[1]*e+t[5]*n+t[9]*r,this[2]=t[2]*e+t[6]*n+t[10]*r,this.normalize()}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=t}}]),r}();exports.Vec3=b;
},{"./functions/Vec3Func.js":"gELV"}],"xXG3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Renderer=void 0;var t=require("../math/Vec3.js");function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function s(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}var r=new t.Vec3,a=1,n=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=i.canvas,r=void 0===s?document.createElement("canvas"):s,n=i.width,h=void 0===n?300:n,l=i.height,d=void 0===l?150:l,o=i.dpr,u=void 0===o?1:o,c=i.alpha,p=void 0!==c&&c,g=i.depth,f=void 0===g||g,v=i.stencil,E=void 0!==v&&v,x=i.antialias,_=void 0!==x&&x,b=i.premultipliedAlpha,m=void 0!==b&&b,w=i.preserveDrawingBuffer,y=void 0!==w&&w,F=i.powerPreference,A=void 0===F?"default":F,O=i.autoClear,T=void 0===O||O,k=i.webgl,B=void 0===k?2:k;e(this,t);var D={alpha:p,depth:f,stencil:E,antialias:_,premultipliedAlpha:m,preserveDrawingBuffer:y,powerPreference:A};this.dpr=u,this.alpha=p,this.color=!0,this.depth=f,this.stencil=E,this.premultipliedAlpha=m,this.autoClear=T,this.id=a++,2===B&&(this.gl=r.getContext("webgl2",D)),this.isWebgl2=!!this.gl,this.gl||(this.gl=r.getContext("webgl",D)||r.getContext("experimental-webgl",D)),this.gl.renderer=this,this.setSize(h,d),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=null,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LESS,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}return s(t,[{key:"setSize",value:function(t,e){this.width=t,this.height=e,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=e*this.dpr,Object.assign(this.gl.canvas.style,{width:t+"px",height:e+"px"})}},{key:"setViewport",value:function(t,e){this.state.viewport.width===t&&this.state.viewport.height===e||(this.state.viewport.width=t,this.state.viewport.height=e,this.gl.viewport(0,0,t,e))}},{key:"enable",value:function(t){!0!==this.state[t]&&(this.gl.enable(t),this.state[t]=!0)}},{key:"disable",value:function(t){!1!==this.state[t]&&(this.gl.disable(t),this.state[t]=!1)}},{key:"setBlendFunc",value:function(t,e,i,s){this.state.blendFunc.src===t&&this.state.blendFunc.dst===e&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=t,this.state.blendFunc.dst=e,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=s,void 0!==i?this.gl.blendFuncSeparate(t,e,i,s):this.gl.blendFunc(t,e))}},{key:"setBlendEquation",value:function(t,e){this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===e||(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=e,void 0!==e?this.gl.blendEquationSeparate(t,e):this.gl.blendEquation(t))}},{key:"setCullFace",value:function(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}},{key:"setFrontFace",value:function(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}},{key:"setDepthMask",value:function(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}},{key:"setDepthFunc",value:function(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}},{key:"activeTexture",value:function(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}},{key:"bindFramebuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,i=void 0===e?this.gl.FRAMEBUFFER:e,s=t.buffer,r=void 0===s?null:s;this.state.framebuffer!==r&&(this.state.framebuffer=r,this.gl.bindFramebuffer(i,r))}},{key:"getExtension",value:function(t,e,i){return e&&this.gl[e]?this.gl[e].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),e?this.extensions[t]?this.extensions[t][i].bind(this.extensions[t]):null:this.extensions[t])}},{key:"sortOpaque",value:function(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:t.zDepth!==e.zDepth?t.zDepth-e.zDepth:e.id-t.id}},{key:"sortTransparent",value:function(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.zDepth!==e.zDepth?e.zDepth-t.zDepth:e.id-t.id}},{key:"sortUI",value:function(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:e.id-t.id}},{key:"getRenderList",value:function(t){var e=t.scene,i=t.camera,s=t.frustumCull,a=t.sort,n=[];if(i&&s&&i.updateFrustum(),e.traverse(function(t){if(!t.visible)return!0;t.draw&&(s&&t.frustumCulled&&i&&!i.frustumIntersectsMesh(t)||n.push(t))}),a){var h=[],l=[],d=[];n.forEach(function(t){t.program.transparent?t.program.depthTest?l.push(t):d.push(t):h.push(t),t.zDepth=0,0===t.renderOrder&&t.program.depthTest&&i&&(t.worldMatrix.getTranslation(r),r.applyMatrix4(i.projectionViewMatrix),t.zDepth=r.z)}),h.sort(this.sortOpaque),l.sort(this.sortTransparent),d.sort(this.sortUI),n=h.concat(l,d)}return n}},{key:"render",value:function(t){var e=t.scene,i=t.camera,s=t.target,r=void 0===s?null:s,a=t.update,n=void 0===a||a,h=t.sort,l=void 0===h||h,d=t.frustumCull,o=void 0===d||d,u=t.clear;null===r?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(u||this.autoClear&&!1!==u)&&(!this.depth||r&&!r.depth||(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),n&&e.updateMatrixWorld(),i&&i.updateMatrixWorld(),this.getRenderList({scene:e,camera:i,frustumCull:o,sort:l}).forEach(function(t){t.draw({camera:i})})}}]),t}();exports.Renderer=n;
},{"../math/Vec3.js":"TrsQ"}],"RRKI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vec3=void 0;var t=n(require("./functions/Vec3Func.js"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var o=i?Object.getOwnPropertyDescriptor(t,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=t[u]}return r.default=t,n&&n.set(t,r),r}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function c(t){var e=y();return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||!p(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return h(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,t)})(t)}function h(t,e,n){return(h=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&v(i,n.prototype),i}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(e){s(r,l(Array));var n=c(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return i(this,r),a(t=n.call(this,e,u,o),f(t))}return o(r,[{key:"set",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e.length?this.copy(e):(t.set(this,e,n,r),this)}},{key:"copy",value:function(e){return t.copy(this,e),this}},{key:"add",value:function(e,n){return n?t.add(this,e,n):t.add(this,this,e),this}},{key:"sub",value:function(e,n){return n?t.subtract(this,e,n):t.subtract(this,this,e),this}},{key:"multiply",value:function(e){return e.length?t.multiply(this,this,e):t.scale(this,this,e),this}},{key:"divide",value:function(e){return e.length?t.divide(this,this,e):t.scale(this,this,1/e),this}},{key:"inverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.inverse(this,e),this}},{key:"len",value:function(){return t.length(this)}},{key:"distance",value:function(e){return e?t.distance(this,e):t.length(this)}},{key:"squaredLen",value:function(){return t.squaredLength(this)}},{key:"squaredDistance",value:function(e){return e?t.squaredDistance(this,e):t.squaredLength(this)}},{key:"negate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.negate(this,e),this}},{key:"cross",value:function(e,n){return n?t.cross(this,e,n):t.cross(this,this,e),this}},{key:"scale",value:function(e){return t.scale(this,this,e),this}},{key:"normalize",value:function(){return t.normalize(this,this),this}},{key:"dot",value:function(e){return t.dot(this,e)}},{key:"equals",value:function(e){return t.exactEquals(this,e)}},{key:"applyMatrix4",value:function(e){return t.transformMat4(this,this,e),this}},{key:"scaleRotateMatrix4",value:function(e){return t.scaleRotateMat4(this,this,e),this}},{key:"applyQuaternion",value:function(e){return t.transformQuat(this,this,e),this}},{key:"angle",value:function(e){return t.angle(this,e)}},{key:"lerp",value:function(e,n){return t.lerp(this,this,e,n),this}},{key:"clone",value:function(){return new r(this[0],this[1],this[2])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"transformDirection",value:function(t){var e=this[0],n=this[1],r=this[2];return this[0]=t[0]*e+t[4]*n+t[8]*r,this[1]=t[1]*e+t[5]*n+t[9]*r,this[2]=t[2]*e+t[6]*n+t[10]*r,this.normalize()}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=t}}]),r}();exports.Vec3=b;
},{"./functions/Vec3Func.js":"gELV"}],"E6cr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copy=t,exports.set=e,exports.add=n,exports.scale=o,exports.length=u,exports.normalize=s,exports.dot=c,exports.lerp=p;var r=1e-6;function t(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function e(r,t,e,n,o){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r}function n(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r[3]=t[3]+e[3],r}function o(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*e,r}function u(r){var t=r[0],e=r[1],n=r[2],o=r[3];return Math.sqrt(t*t+e*e+n*n+o*o)}function s(r,t){var e=t[0],n=t[1],o=t[2],u=t[3],s=e*e+n*n+o*o+u*u;return s>0&&(s=1/Math.sqrt(s)),r[0]=e*s,r[1]=n*s,r[2]=o*s,r[3]=u*s,r}function c(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]}function p(r,t,e,n){var o=t[0],u=t[1],s=t[2],c=t[3];return r[0]=o+n*(e[0]-o),r[1]=u+n*(e[1]-u),r[2]=s+n*(e[2]-s),r[3]=c+n*(e[3]-c),r}
},{}],"njPt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=o,exports.setAxisAngle=n,exports.multiply=a,exports.rotateX=s,exports.rotateY=p,exports.rotateZ=i,exports.slerp=u,exports.invert=c,exports.conjugate=f,exports.fromMat3=l,exports.fromEuler=v,exports.normalize=exports.length=exports.lerp=exports.dot=exports.scale=exports.add=exports.set=exports.copy=void 0;var t=e(require("./Vec4Func.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=n?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=t[a]}return o.default=t,e&&e.set(t,o),o}function o(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function n(t,r,e){e*=.5;var o=Math.sin(e);return t[0]=o*r[0],t[1]=o*r[1],t[2]=o*r[2],t[3]=Math.cos(e),t}function a(t,r,e){var o=r[0],n=r[1],a=r[2],s=r[3],p=e[0],i=e[1],u=e[2],c=e[3];return t[0]=o*c+s*p+n*u-a*i,t[1]=n*c+s*i+a*p-o*u,t[2]=a*c+s*u+o*i-n*p,t[3]=s*c-o*p-n*i-a*u,t}function s(t,r,e){e*=.5;var o=r[0],n=r[1],a=r[2],s=r[3],p=Math.sin(e),i=Math.cos(e);return t[0]=o*i+s*p,t[1]=n*i+a*p,t[2]=a*i-n*p,t[3]=s*i-o*p,t}function p(t,r,e){e*=.5;var o=r[0],n=r[1],a=r[2],s=r[3],p=Math.sin(e),i=Math.cos(e);return t[0]=o*i-a*p,t[1]=n*i+s*p,t[2]=a*i+o*p,t[3]=s*i-n*p,t}function i(t,r,e){e*=.5;var o=r[0],n=r[1],a=r[2],s=r[3],p=Math.sin(e),i=Math.cos(e);return t[0]=o*i+n*p,t[1]=n*i-o*p,t[2]=a*i+s*p,t[3]=s*i-a*p,t}function u(t,r,e,o){var n,a,s,p,i,u=r[0],c=r[1],f=r[2],l=r[3],v=e[0],x=e[1],h=e[2],M=e[3];return(a=u*v+c*x+f*h+l*M)<0&&(a=-a,v=-v,x=-x,h=-h,M=-M),1-a>1e-6?(n=Math.acos(a),s=Math.sin(n),p=Math.sin((1-o)*n)/s,i=Math.sin(o*n)/s):(p=1-o,i=o),t[0]=p*u+i*v,t[1]=p*c+i*x,t[2]=p*f+i*h,t[3]=p*l+i*M,t}function c(t,r){var e=r[0],o=r[1],n=r[2],a=r[3],s=e*e+o*o+n*n+a*a,p=s?1/s:0;return t[0]=-e*p,t[1]=-o*p,t[2]=-n*p,t[3]=a*p,t}function f(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function l(t,r){var e,o=r[0]+r[4]+r[8];if(o>0)e=Math.sqrt(o+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var n=0;r[4]>r[0]&&(n=1),r[8]>r[3*n+n]&&(n=2);var a=(n+1)%3,s=(n+2)%3;e=Math.sqrt(r[3*n+n]-r[3*a+a]-r[3*s+s]+1),t[n]=.5*e,e=.5/e,t[3]=(r[3*a+s]-r[3*s+a])*e,t[a]=(r[3*a+n]+r[3*n+a])*e,t[s]=(r[3*s+n]+r[3*n+s])*e}return t}function v(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ",o=Math.sin(.5*r[0]),n=Math.cos(.5*r[0]),a=Math.sin(.5*r[1]),s=Math.cos(.5*r[1]),p=Math.sin(.5*r[2]),i=Math.cos(.5*r[2]);return"XYZ"===e?(t[0]=o*s*i+n*a*p,t[1]=n*a*i-o*s*p,t[2]=n*s*p+o*a*i,t[3]=n*s*i-o*a*p):"YXZ"===e?(t[0]=o*s*i+n*a*p,t[1]=n*a*i-o*s*p,t[2]=n*s*p-o*a*i,t[3]=n*s*i+o*a*p):"ZXY"===e?(t[0]=o*s*i-n*a*p,t[1]=n*a*i+o*s*p,t[2]=n*s*p+o*a*i,t[3]=n*s*i-o*a*p):"ZYX"===e?(t[0]=o*s*i-n*a*p,t[1]=n*a*i+o*s*p,t[2]=n*s*p-o*a*i,t[3]=n*s*i+o*a*p):"YZX"===e?(t[0]=o*s*i+n*a*p,t[1]=n*a*i+o*s*p,t[2]=n*s*p-o*a*i,t[3]=n*s*i-o*a*p):"XZY"===e&&(t[0]=o*s*i-n*a*p,t[1]=n*a*i-o*s*p,t[2]=n*s*p+o*a*i,t[3]=n*s*i+o*a*p),t}var x=t.copy;exports.copy=x;var h=t.set;exports.set=h;var M=t.add;exports.add=M;var d=t.scale;exports.scale=d;var y=t.dot;exports.dot=y;var g=t.lerp;exports.lerp=g;var j=t.length;exports.length=j;var O=t.normalize;exports.normalize=O;
},{"./Vec4Func.js":"E6cr"}],"X9Cf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Quat=void 0;var t=n(require("./functions/QuatFunc.js"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function c(t){var e=y();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){if(null===t||!p(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return l(t,arguments,g(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,t)})(t)}function l(t,e,n){return(l=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&v(o,n.prototype),o}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(e){s(r,h(Array));var n=c(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o(this,r),(t=n.call(this,e,i,u,s)).onChange=function(){},f(t,a(t))}return u(r,[{key:"identity",value:function(){return t.identity(this),this.onChange(),this}},{key:"set",value:function(e,n,r,o){return e.length?this.copy(e):(t.set(this,e,n,r,o),this.onChange(),this)}},{key:"rotateX",value:function(e){return t.rotateX(this,this,e),this.onChange(),this}},{key:"rotateY",value:function(e){return t.rotateY(this,this,e),this.onChange(),this}},{key:"rotateZ",value:function(e){return t.rotateZ(this,this,e),this.onChange(),this}},{key:"inverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.invert(this,e),this.onChange(),this}},{key:"conjugate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.conjugate(this,e),this.onChange(),this}},{key:"copy",value:function(e){return t.copy(this,e),this.onChange(),this}},{key:"normalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.normalize(this,e),this.onChange(),this}},{key:"multiply",value:function(e,n){return n?t.multiply(this,e,n):t.multiply(this,this,e),this.onChange(),this}},{key:"dot",value:function(e){return t.dot(this,e)}},{key:"fromMatrix3",value:function(e){return t.fromMat3(this,e),this.onChange(),this}},{key:"fromEuler",value:function(e){return t.fromEuler(this,e,e.order),this}},{key:"fromAxisAngle",value:function(e,n){return t.setAxisAngle(this,e,n),this}},{key:"slerp",value:function(e,n){return t.slerp(this,this,e,n),this}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=t,this.onChange()}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t,this.onChange()}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=t,this.onChange()}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=t,this.onChange()}}]),r}();exports.Quat=b;
},{"./functions/QuatFunc.js":"njPt"}],"ENkh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copy=r,exports.set=n,exports.identity=e,exports.transpose=o,exports.invert=a,exports.determinant=u,exports.multiply=s,exports.translate=i,exports.scale=p,exports.rotate=c,exports.getTranslation=f,exports.getScaling=x,exports.getMaxScaleOnAxis=v,exports.fromRotationTranslationScale=l,exports.fromQuat=M,exports.perspective=y,exports.ortho=d,exports.targetTo=g,exports.add=q,exports.subtract=m,exports.multiplyScalar=S,exports.getRotation=void 0;var t=1e-6;function r(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function n(t,r,n,e,o,a,u,s,i,p,c,f,x,v,h,l,M){return t[0]=r,t[1]=n,t[2]=e,t[3]=o,t[4]=a,t[5]=u,t[6]=s,t[7]=i,t[8]=p,t[9]=c,t[10]=f,t[11]=x,t[12]=v,t[13]=h,t[14]=l,t[15]=M,t}function e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t,r){if(t===r){var n=r[1],e=r[2],o=r[3],a=r[6],u=r[7],s=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=n,t[6]=r[9],t[7]=r[13],t[8]=e,t[9]=a,t[11]=r[14],t[12]=o,t[13]=u,t[14]=s}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function a(t,r){var n=r[0],e=r[1],o=r[2],a=r[3],u=r[4],s=r[5],i=r[6],p=r[7],c=r[8],f=r[9],x=r[10],v=r[11],h=r[12],l=r[13],M=r[14],y=r[15],d=n*s-e*u,g=n*i-o*u,q=n*p-a*u,m=e*i-o*s,S=e*p-a*s,b=o*p-a*i,R=c*l-f*h,T=c*M-x*h,O=c*y-v*h,_=f*M-x*l,j=f*y-v*l,A=x*y-v*M,P=d*A-g*j+q*_+m*O-S*T+b*R;return P?(P=1/P,t[0]=(s*A-i*j+p*_)*P,t[1]=(o*j-e*A-a*_)*P,t[2]=(l*b-M*S+y*m)*P,t[3]=(x*S-f*b-v*m)*P,t[4]=(i*O-u*A-p*T)*P,t[5]=(n*A-o*O+a*T)*P,t[6]=(M*q-h*b-y*g)*P,t[7]=(c*b-x*q+v*g)*P,t[8]=(u*j-s*O+p*R)*P,t[9]=(e*O-n*j-a*R)*P,t[10]=(h*S-l*q+y*d)*P,t[11]=(f*q-c*S-v*d)*P,t[12]=(s*T-u*_-i*R)*P,t[13]=(n*_-e*T+o*R)*P,t[14]=(l*g-h*m-M*d)*P,t[15]=(c*m-f*g+x*d)*P,t):null}function u(t){var r=t[0],n=t[1],e=t[2],o=t[3],a=t[4],u=t[5],s=t[6],i=t[7],p=t[8],c=t[9],f=t[10],x=t[11],v=t[12],h=t[13],l=t[14],M=t[15];return(r*u-n*a)*(f*M-x*l)-(r*s-e*a)*(c*M-x*h)+(r*i-o*a)*(c*l-f*h)+(n*s-e*u)*(p*M-x*v)-(n*i-o*u)*(p*l-f*v)+(e*i-o*s)*(p*h-c*v)}function s(t,r,n){var e=r[0],o=r[1],a=r[2],u=r[3],s=r[4],i=r[5],p=r[6],c=r[7],f=r[8],x=r[9],v=r[10],h=r[11],l=r[12],M=r[13],y=r[14],d=r[15],g=n[0],q=n[1],m=n[2],S=n[3];return t[0]=g*e+q*s+m*f+S*l,t[1]=g*o+q*i+m*x+S*M,t[2]=g*a+q*p+m*v+S*y,t[3]=g*u+q*c+m*h+S*d,g=n[4],q=n[5],m=n[6],S=n[7],t[4]=g*e+q*s+m*f+S*l,t[5]=g*o+q*i+m*x+S*M,t[6]=g*a+q*p+m*v+S*y,t[7]=g*u+q*c+m*h+S*d,g=n[8],q=n[9],m=n[10],S=n[11],t[8]=g*e+q*s+m*f+S*l,t[9]=g*o+q*i+m*x+S*M,t[10]=g*a+q*p+m*v+S*y,t[11]=g*u+q*c+m*h+S*d,g=n[12],q=n[13],m=n[14],S=n[15],t[12]=g*e+q*s+m*f+S*l,t[13]=g*o+q*i+m*x+S*M,t[14]=g*a+q*p+m*v+S*y,t[15]=g*u+q*c+m*h+S*d,t}function i(t,r,n){var e,o,a,u,s,i,p,c,f,x,v,h,l=n[0],M=n[1],y=n[2];return r===t?(t[12]=r[0]*l+r[4]*M+r[8]*y+r[12],t[13]=r[1]*l+r[5]*M+r[9]*y+r[13],t[14]=r[2]*l+r[6]*M+r[10]*y+r[14],t[15]=r[3]*l+r[7]*M+r[11]*y+r[15]):(e=r[0],o=r[1],a=r[2],u=r[3],s=r[4],i=r[5],p=r[6],c=r[7],f=r[8],x=r[9],v=r[10],h=r[11],t[0]=e,t[1]=o,t[2]=a,t[3]=u,t[4]=s,t[5]=i,t[6]=p,t[7]=c,t[8]=f,t[9]=x,t[10]=v,t[11]=h,t[12]=e*l+s*M+f*y+r[12],t[13]=o*l+i*M+x*y+r[13],t[14]=a*l+p*M+v*y+r[14],t[15]=u*l+c*M+h*y+r[15]),t}function p(t,r,n){var e=n[0],o=n[1],a=n[2];return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=r[7]*o,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=r[11]*a,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function c(r,n,e,o){var a,u,s,i,p,c,f,x,v,h,l,M,y,d,g,q,m,S,b,R,T,O,_,j,A=o[0],P=o[1],Q=o[2],k=Math.hypot(A,P,Q);return Math.abs(k)<t?null:(A*=k=1/k,P*=k,Q*=k,a=Math.sin(e),s=1-(u=Math.cos(e)),i=n[0],p=n[1],c=n[2],f=n[3],x=n[4],v=n[5],h=n[6],l=n[7],M=n[8],y=n[9],d=n[10],g=n[11],q=A*A*s+u,m=P*A*s+Q*a,S=Q*A*s-P*a,b=A*P*s-Q*a,R=P*P*s+u,T=Q*P*s+A*a,O=A*Q*s+P*a,_=P*Q*s-A*a,j=Q*Q*s+u,r[0]=i*q+x*m+M*S,r[1]=p*q+v*m+y*S,r[2]=c*q+h*m+d*S,r[3]=f*q+l*m+g*S,r[4]=i*b+x*R+M*T,r[5]=p*b+v*R+y*T,r[6]=c*b+h*R+d*T,r[7]=f*b+l*R+g*T,r[8]=i*O+x*_+M*j,r[9]=p*O+v*_+y*j,r[10]=c*O+h*_+d*j,r[11]=f*O+l*_+g*j,n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r)}function f(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t}function x(t,r){var n=r[0],e=r[1],o=r[2],a=r[4],u=r[5],s=r[6],i=r[8],p=r[9],c=r[10];return t[0]=Math.hypot(n,e,o),t[1]=Math.hypot(a,u,s),t[2]=Math.hypot(i,p,c),t}function v(t){var r=t[0],n=t[1],e=t[2],o=t[4],a=t[5],u=t[6],s=t[8],i=t[9],p=t[10],c=r*r+n*n+e*e,f=o*o+a*a+u*u,x=s*s+i*i+p*p;return Math.sqrt(Math.max(c,f,x))}var h=function(){var t=[0,0,0];return function(r,n){var e=t;x(e,n);var o=1/e[0],a=1/e[1],u=1/e[2],s=n[0]*o,i=n[1]*a,p=n[2]*u,c=n[4]*o,f=n[5]*a,v=n[6]*u,h=n[8]*o,l=n[9]*a,M=n[10]*u,y=s+f+M,d=0;return y>0?(d=2*Math.sqrt(y+1),r[3]=.25*d,r[0]=(v-l)/d,r[1]=(h-p)/d,r[2]=(i-c)/d):s>f&&s>M?(d=2*Math.sqrt(1+s-f-M),r[3]=(v-l)/d,r[0]=.25*d,r[1]=(i+c)/d,r[2]=(h+p)/d):f>M?(d=2*Math.sqrt(1+f-s-M),r[3]=(h-p)/d,r[0]=(i+c)/d,r[1]=.25*d,r[2]=(v+l)/d):(d=2*Math.sqrt(1+M-s-f),r[3]=(i-c)/d,r[0]=(h+p)/d,r[1]=(v+l)/d,r[2]=.25*d),r}}();function l(t,r,n,e){var o=r[0],a=r[1],u=r[2],s=r[3],i=o+o,p=a+a,c=u+u,f=o*i,x=o*p,v=o*c,h=a*p,l=a*c,M=u*c,y=s*i,d=s*p,g=s*c,q=e[0],m=e[1],S=e[2];return t[0]=(1-(h+M))*q,t[1]=(x+g)*q,t[2]=(v-d)*q,t[3]=0,t[4]=(x-g)*m,t[5]=(1-(f+M))*m,t[6]=(l+y)*m,t[7]=0,t[8]=(v+d)*S,t[9]=(l-y)*S,t[10]=(1-(f+h))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function M(t,r){var n=r[0],e=r[1],o=r[2],a=r[3],u=n+n,s=e+e,i=o+o,p=n*u,c=e*u,f=e*s,x=o*u,v=o*s,h=o*i,l=a*u,M=a*s,y=a*i;return t[0]=1-f-h,t[1]=c+y,t[2]=x-M,t[3]=0,t[4]=c-y,t[5]=1-p-h,t[6]=v+l,t[7]=0,t[8]=x+M,t[9]=v-l,t[10]=1-p-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,r,n,e,o){var a=1/Math.tan(r/2),u=1/(e-o);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+e)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*e*u,t[15]=0,t}function d(t,r,n,e,o,a,u){var s=1/(r-n),i=1/(e-o),p=1/(a-u);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*p,t[11]=0,t[12]=(r+n)*s,t[13]=(o+e)*i,t[14]=(u+a)*p,t[15]=1,t}function g(t,r,n,e){var o=r[0],a=r[1],u=r[2],s=e[0],i=e[1],p=e[2],c=o-n[0],f=a-n[1],x=u-n[2],v=c*c+f*f+x*x;0===v?x=1:(c*=v=1/Math.sqrt(v),f*=v,x*=v);var h=i*x-p*f,l=p*c-s*x,M=s*f-i*c;return 0===(v=h*h+l*l+M*M)&&(p?s+=1e-6:i?p+=1e-6:i+=1e-6,v=(h=i*x-p*f)*h+(l=p*c-s*x)*l+(M=s*f-i*c)*M),h*=v=1/Math.sqrt(v),l*=v,M*=v,t[0]=h,t[1]=l,t[2]=M,t[3]=0,t[4]=f*M-x*l,t[5]=x*h-c*M,t[6]=c*l-f*h,t[7]=0,t[8]=c,t[9]=f,t[10]=x,t[11]=0,t[12]=o,t[13]=a,t[14]=u,t[15]=1,t}function q(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t[9]=r[9]+n[9],t[10]=r[10]+n[10],t[11]=r[11]+n[11],t[12]=r[12]+n[12],t[13]=r[13]+n[13],t[14]=r[14]+n[14],t[15]=r[15]+n[15],t}function m(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t[9]=r[9]-n[9],t[10]=r[10]-n[10],t[11]=r[11]-n[11],t[12]=r[12]-n[12],t[13]=r[13]-n[13],t[14]=r[14]-n[14],t[15]=r[15]-n[15],t}function S(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t[9]=r[9]*n,t[10]=r[10]*n,t[11]=r[11]*n,t[12]=r[12]*n,t[13]=r[13]*n,t[14]=r[14]*n,t[15]=r[15]*n,t}exports.getRotation=h;
},{}],"ulua":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mat4=void 0;var t=n(require("./functions/Mat4Func.js"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=i?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function c(t){var e=y();return function(){var n,r=g(t);if(e){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){if(null===t||!p(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return l(t,arguments,g(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,t)})(t)}function l(t,e,n){return(l=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&v(i,n.prototype),i}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){s(r,h(Array));var n=c(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,g=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,b=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,k=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,m=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,O=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return i(this,r),a(t=n.call(this,e,o,u,s,c,h,l,y,p,v,g,d,b,k,m,O),f(t))}return u(r,[{key:"set",value:function(e,n,r,i,o,u,s,c,a,f,h,l,y,p,v,g){return e.length?this.copy(e):(t.set(this,e,n,r,i,o,u,s,c,a,f,h,l,y,p,v,g),this)}},{key:"translate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return t.translate(this,n,e),this}},{key:"rotate",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;return t.rotate(this,r,e,n),this}},{key:"scale",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return t.scale(this,n,"number"==typeof e?[e,e,e]:e),this}},{key:"multiply",value:function(e,n){return n?t.multiply(this,e,n):t.multiply(this,this,e),this}},{key:"identity",value:function(){return t.identity(this),this}},{key:"copy",value:function(e){return t.copy(this,e),this}},{key:"fromPerspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fov,r=e.aspect,i=e.near,o=e.far;return t.perspective(this,n,r,i,o),this}},{key:"fromOrthogonal",value:function(e){var n=e.left,r=e.right,i=e.bottom,o=e.top,u=e.near,s=e.far;return t.ortho(this,n,r,i,o,u,s),this}},{key:"fromQuaternion",value:function(e){return t.fromQuat(this,e),this}},{key:"setPosition",value:function(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}},{key:"inverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.invert(this,e),this}},{key:"compose",value:function(e,n,r){return t.fromRotationTranslationScale(this,e,n,r),this}},{key:"getRotation",value:function(e){return t.getRotation(e,this),this}},{key:"getTranslation",value:function(e){return t.getTranslation(e,this),this}},{key:"getScaling",value:function(e){return t.getScaling(e,this),this}},{key:"getMaxScaleOnAxis",value:function(){return t.getMaxScaleOnAxis(this)}},{key:"lookAt",value:function(e,n,r){return t.targetTo(this,e,n,r),this}},{key:"determinant",value:function(){return t.determinant(this)}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this[4]=t[e+4],this[5]=t[e+5],this[6]=t[e+6],this[7]=t[e+7],this[8]=t[e+8],this[9]=t[e+9],this[10]=t[e+10],this[11]=t[e+11],this[12]=t[e+12],this[13]=t[e+13],this[14]=t[e+14],this[15]=t[e+15],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t[e+4]=this[4],t[e+5]=this[5],t[e+6]=this[6],t[e+7]=this[7],t[e+8]=this[8],t[e+9]=this[9],t[e+10]=this[10],t[e+11]=this[11],t[e+12]=this[12],t[e+13]=this[13],t[e+14]=this[14],t[e+15]=this[15],t}},{key:"x",get:function(){return this[12]},set:function(t){this[12]=t}},{key:"y",get:function(){return this[13]},set:function(t){this[13]=t}},{key:"z",get:function(){return this[14]},set:function(t){this[14]=t}},{key:"w",get:function(){return this[15]},set:function(t){this[15]=t}}]),r}();exports.Mat4=d;
},{"./functions/Mat4Func.js":"ENkh"}],"WFHD":[function(require,module,exports) {
"use strict";function a(a,t){var M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YXZ";return"XYZ"===M?(a[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(a[0]=Math.atan2(-t[9],t[10]),a[2]=Math.atan2(-t[4],t[0])):(a[0]=Math.atan2(t[6],t[5]),a[2]=0)):"YXZ"===M?(a[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(a[1]=Math.atan2(t[8],t[10]),a[2]=Math.atan2(t[1],t[5])):(a[1]=Math.atan2(-t[2],t[0]),a[2]=0)):"ZXY"===M?(a[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(a[1]=Math.atan2(-t[2],t[10]),a[2]=Math.atan2(-t[4],t[5])):(a[1]=0,a[2]=Math.atan2(t[1],t[0]))):"ZYX"===M?(a[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(a[0]=Math.atan2(t[6],t[10]),a[2]=Math.atan2(t[1],t[0])):(a[0]=0,a[2]=Math.atan2(-t[4],t[5]))):"YZX"===M?(a[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(a[0]=Math.atan2(-t[9],t[5]),a[1]=Math.atan2(-t[2],t[0])):(a[0]=0,a[1]=Math.atan2(t[8],t[10]))):"XZY"===M&&(a[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(a[0]=Math.atan2(t[6],t[5]),a[1]=Math.atan2(t[8],t[0])):(a[0]=Math.atan2(-t[9],t[10]),a[1]=0)),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromRotationMatrix=a;
},{}],"vWYj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Euler=void 0;var t=r(require("./functions/EulerFunc.js")),e=require("./Mat4.js");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function a(t){var e=y();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||!v(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return h(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,t)})(t)}function h(t,e,n){return(h=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&b(o,n.prototype),o}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=new e.Mat4,O=function(e){f(r,p(Array));var n=a(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YXZ";return i(this,r),(t=n.call(this,e,o,u)).order=c,t.onChange=function(){},s(t,l(t))}return c(r,[{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return t.length?this.copy(t):(this[0]=t,this[1]=e,this[2]=n,this.onChange(),this)}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.onChange(),this}},{key:"reorder",value:function(t){return this.order=t,this.onChange(),this}},{key:"fromRotationMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order;return t.fromRotationMatrix(this,e,n),this}},{key:"fromQuaternion",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.order;return g.fromQuaternion(t),this.fromRotationMatrix(g,e)}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=t,this.onChange()}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t,this.onChange()}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=t,this.onChange()}}]),r}();exports.Euler=O;
},{"./functions/EulerFunc.js":"WFHD","./Mat4.js":"ulua"}],"hlVi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transform=void 0;var t=require("../math/Vec3.js"),i=require("../math/Quat.js"),e=require("../math/Mat4.js"),r=require("../math/Euler.js");function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,i,e){return i&&a(t.prototype,i),e&&a(t,e),t}var s=function(){function a(){var o=this;n(this,a),this.parent=null,this.children=[],this.visible=!0,this.matrix=new e.Mat4,this.worldMatrix=new e.Mat4,this.matrixAutoUpdate=!0,this.position=new t.Vec3,this.quaternion=new i.Quat,this.scale=new t.Vec3(1),this.rotation=new r.Euler,this.up=new t.Vec3(0,1,0),this.rotation.onChange=function(){return o.quaternion.fromEuler(o.rotation)},this.quaternion.onChange=function(){return o.rotation.fromQuaternion(o.quaternion)}}return o(a,[{key:"setParent",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i&&this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,i&&t&&t.addChild(this,!1)}},{key:"addChild",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(t)||this.children.push(t),i&&t.setParent(this,!1)}},{key:"removeChild",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),i&&t.setParent(null,!1)}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(var i=0,e=this.children.length;i<e;i++)this.children[i].updateMatrixWorld(t)}},{key:"updateMatrix",value:function(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}},{key:"traverse",value:function(t){if(!t(this))for(var i=0,e=this.children.length;i<e;i++)this.children[i].traverse(t)}},{key:"decompose",value:function(){this.matrix.getTranslation(this.position),this.matrix.getRotation(this.quaternion),this.matrix.getScaling(this.scale),this.rotation.fromQuaternion(this.quaternion)}},{key:"lookAt",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion),this.rotation.fromQuaternion(this.quaternion)}}]),a}();exports.Transform=s;
},{"../math/Vec3.js":"RRKI","../math/Quat.js":"X9Cf","../math/Mat4.js":"ulua","../math/Euler.js":"vWYj"}],"NnPT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Camera=void 0;var t=require("./Transform.js"),e=require("../math/Mat4.js"),r=require("../math/Vec3.js");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function a(t,e,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var o=u(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=v();return function(){var r,o=y(t);if(e){var i=y(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return h(this,r)}}function h(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=new e.Mat4,d=new r.Vec3,b=new r.Vec3,g=function(o){c(u,t.Transform);var n=p(u);function u(t){var o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=s.near,c=void 0===a?.1:a,f=s.far,p=void 0===f?100:f,h=s.fov,v=void 0===h?45:h,y=s.aspect,m=void 0===y?1:y,d=s.left,b=s.right,g=s.bottom,w=s.top,M=s.zoom,x=void 0===M?1:M;return i(this,u),o=n.call(this),Object.assign(l(o),{near:c,far:p,fov:v,aspect:m,left:d,right:b,bottom:g,top:w,zoom:x}),o.projectionMatrix=new e.Mat4,o.viewMatrix=new e.Mat4,o.projectionViewMatrix=new e.Mat4,o.worldPosition=new r.Vec3,o.type=d||b?"orthographic":"perspective","orthographic"===o.type?o.orthographic():o.perspective(),o}return s(u,[{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.near,r=void 0===e?this.near:e,o=t.far,i=void 0===o?this.far:o,n=t.fov,s=void 0===n?this.fov:n,a=t.aspect,u=void 0===a?this.aspect:a;return Object.assign(this,{near:r,far:i,fov:s,aspect:u}),this.projectionMatrix.fromPerspective({fov:s*(Math.PI/180),aspect:u,near:r,far:i}),this.type="perspective",this}},{key:"orthographic",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.near,r=void 0===e?this.near:e,o=t.far,i=void 0===o?this.far:o,n=t.left,s=void 0===n?this.left:n,a=t.right,u=void 0===a?this.right:a,c=t.bottom,f=void 0===c?this.bottom:c,p=t.top,h=void 0===p?this.top:p,l=t.zoom,v=void 0===l?this.zoom:l;return Object.assign(this,{near:r,far:i,left:s,right:u,bottom:f,top:h,zoom:v}),s/=v,u/=v,f/=v,h/=v,this.projectionMatrix.fromOrthogonal({left:s,right:u,bottom:f,top:h,near:r,far:i}),this.type="orthographic",this}},{key:"updateMatrixWorld",value:function(){return a(y(u.prototype),"updateMatrixWorld",this).call(this),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}},{key:"lookAt",value:function(t){return a(y(u.prototype),"lookAt",this).call(this,t,!0),this}},{key:"project",value:function(t){return t.applyMatrix4(this.viewMatrix),t.applyMatrix4(this.projectionMatrix),this}},{key:"unproject",value:function(t){return t.applyMatrix4(m.inverse(this.projectionMatrix)),t.applyMatrix4(this.worldMatrix),this}},{key:"updateFrustum",value:function(){this.frustum||(this.frustum=[new r.Vec3,new r.Vec3,new r.Vec3,new r.Vec3,new r.Vec3,new r.Vec3]);var t=this.projectionViewMatrix;this.frustum[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).constant=t[15]-t[12],this.frustum[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).constant=t[15]+t[12],this.frustum[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).constant=t[15]+t[13],this.frustum[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).constant=t[15]-t[13],this.frustum[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).constant=t[15]-t[14],this.frustum[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).constant=t[15]+t[14];for(var e=0;e<6;e++){var o=1/this.frustum[e].distance();this.frustum[e].multiply(o),this.frustum[e].constant*=o}}},{key:"frustumIntersectsMesh",value:function(t){if(!t.geometry.attributes.position)return!0;if(t.geometry.bounds&&t.geometry.bounds.radius!==1/0||t.geometry.computeBoundingSphere(),!t.geometry.bounds)return!0;var e=d;e.copy(t.geometry.bounds.center),e.applyMatrix4(t.worldMatrix);var r=t.geometry.bounds.radius*t.worldMatrix.getMaxScaleOnAxis();return this.frustumIntersectsSphere(e,r)}},{key:"frustumIntersectsSphere",value:function(t,e){for(var r=b,o=0;o<6;o++){var i=this.frustum[o];if(r.copy(i).dot(t)+i.constant<-e)return!1}return!0}}]),u}();exports.Camera=g;
},{"./Transform.js":"hlVi","../math/Mat4.js":"ulua","../math/Vec3.js":"RRKI"}],"wvyd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copy=t,exports.set=n,exports.add=e,exports.subtract=o,exports.multiply=u,exports.divide=s,exports.scale=a,exports.distance=c,exports.squaredDistance=i,exports.length=f,exports.squaredLength=p,exports.negate=x,exports.inverse=v,exports.normalize=d,exports.dot=l,exports.cross=M,exports.lerp=m,exports.transformMat2=q,exports.transformMat2d=h,exports.transformMat3=g,exports.transformMat4=y,exports.exactEquals=b;var r=1e-6;function t(r,t){return r[0]=t[0],r[1]=t[1],r}function n(r,t,n){return r[0]=t,r[1]=n,r}function e(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r}function o(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r}function u(r,t,n){return r[0]=t[0]*n[0],r[1]=t[1]*n[1],r}function s(r,t,n){return r[0]=t[0]/n[0],r[1]=t[1]/n[1],r}function a(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r}function c(r,t){var n=t[0]-r[0],e=t[1]-r[1];return Math.sqrt(n*n+e*e)}function i(r,t){var n=t[0]-r[0],e=t[1]-r[1];return n*n+e*e}function f(r){var t=r[0],n=r[1];return Math.sqrt(t*t+n*n)}function p(r){var t=r[0],n=r[1];return t*t+n*n}function x(r,t){return r[0]=-t[0],r[1]=-t[1],r}function v(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}function d(r,t){var n=t[0],e=t[1],o=n*n+e*e;return o>0&&(o=1/Math.sqrt(o)),r[0]=t[0]*o,r[1]=t[1]*o,r}function l(r,t){return r[0]*t[0]+r[1]*t[1]}function M(r,t){return r[0]*t[1]-r[1]*t[0]}function m(r,t,n,e){var o=t[0],u=t[1];return r[0]=o+e*(n[0]-o),r[1]=u+e*(n[1]-u),r}function q(r,t,n){var e=t[0],o=t[1];return r[0]=n[0]*e+n[2]*o,r[1]=n[1]*e+n[3]*o,r}function h(r,t,n){var e=t[0],o=t[1];return r[0]=n[0]*e+n[2]*o+n[4],r[1]=n[1]*e+n[3]*o+n[5],r}function g(r,t,n){var e=t[0],o=t[1];return r[0]=n[0]*e+n[3]*o+n[6],r[1]=n[1]*e+n[4]*o+n[7],r}function y(r,t,n){var e=t[0],o=t[1];return r[0]=n[0]*e+n[4]*o+n[12],r[1]=n[1]*e+n[5]*o+n[13],r}function b(r,t){return r[0]===t[0]&&r[1]===t[1]}
},{}],"o05s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vec2=void 0;var t=n(require("./functions/Vec2Func.js"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var o=i?Object.getOwnPropertyDescriptor(t,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=t[u]}return r.default=t,n&&n.set(t,r),r}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function s(t){var e=y();return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||!p(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return h(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,t)})(t)}function h(t,e,n){return(h=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&v(i,n.prototype),i}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(e){c(r,l(Array));var n=s(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return i(this,r),a(t=n.call(this,e,u),f(t))}return o(r,[{key:"set",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return e.length?this.copy(e):(t.set(this,e,n),this)}},{key:"copy",value:function(e){return t.copy(this,e),this}},{key:"add",value:function(e,n){return n?t.add(this,e,n):t.add(this,this,e),this}},{key:"sub",value:function(e,n){return n?t.subtract(this,e,n):t.subtract(this,this,e),this}},{key:"multiply",value:function(e){return e.length?t.multiply(this,this,e):t.scale(this,this,e),this}},{key:"divide",value:function(e){return e.length?t.divide(this,this,e):t.scale(this,this,1/e),this}},{key:"inverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.inverse(this,e),this}},{key:"len",value:function(){return t.length(this)}},{key:"distance",value:function(e){return e?t.distance(this,e):t.length(this)}},{key:"squaredLen",value:function(){return this.squaredDistance()}},{key:"squaredDistance",value:function(e){return e?t.squaredDistance(this,e):t.squaredLength(this)}},{key:"negate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.negate(this,e),this}},{key:"cross",value:function(e,n){return n?t.cross(e,n):t.cross(this,e)}},{key:"scale",value:function(e){return t.scale(this,this,e),this}},{key:"normalize",value:function(){return t.normalize(this,this),this}},{key:"dot",value:function(e){return t.dot(this,e)}},{key:"equals",value:function(e){return t.exactEquals(this,e)}},{key:"applyMatrix3",value:function(e){return t.transformMat3(this,this,e),this}},{key:"applyMatrix4",value:function(e){return t.transformMat4(this,this,e),this}},{key:"lerp",value:function(e,n){t.lerp(this,this,e,n)}},{key:"clone",value:function(){return new r(this[0],this[1])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[e],this[1]=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t}}]),r}();exports.Vec2=b;
},{"./functions/Vec2Func.js":"wvyd"}],"dF3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Orbit=s;var e=require("../math/Vec3.js"),t=require("../math/Vec2.js"),a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,DOLLY_PAN:3},i=new e.Vec3,n=new t.Vec2,o=new t.Vec2;function s(s){var u=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=r.element,c=void 0===h?document:h,d=r.enabled,p=void 0===d||d,v=r.target,m=void 0===v?new e.Vec3:v,l=r.ease,f=void 0===l?.25:l,g=r.inertia,M=void 0===g?.85:g,b=r.enableRotate,w=void 0===b||b,E=r.rotateSpeed,L=void 0===E?.1:E,y=r.autoRotate,O=void 0!==y&&y,N=r.autoRotateSpeed,Y=void 0===N?1:N,x=r.enableZoom,A=void 0===x||x,P=r.zoomSpeed,X=void 0===P?1:P,D=r.enablePan,T=void 0===D||D,V=r.panSpeed,k=void 0===V?.1:V,R=r.minPolarAngle,I=void 0===R?0:R,z=r.maxPolarAngle,B=void 0===z?Math.PI:z,q=r.minAzimuthAngle,H=void 0===q?-1/0:q,S=r.maxAzimuthAngle,_=void 0===S?1/0:S,j=r.minDistance,Z=void 0===j?0:j,C=r.maxDistance,F=void 0===C?1/0:C;this.enabled=p,this.target=m,f=f||1,M=M||0,this.minDistance=Z,this.maxDistance=F;var G={radius:1,phi:0,theta:0},J={radius:1,phi:0,theta:0},K={radius:1,phi:0,theta:0},Q=new e.Vec3,U=new e.Vec3;U.copy(s.position).sub(this.target),K.radius=J.radius=U.distance(),K.theta=J.theta=Math.atan2(U.x,U.z),K.phi=J.phi=Math.acos(Math.min(Math.max(U.y/J.radius,-1),1)),this.offset=U,this.update=function(){var e;O&&(e=2*Math.PI/60/60*Y,G.theta-=e),J.radius*=G.radius,J.theta+=G.theta,J.phi+=G.phi,J.theta=Math.max(H,Math.min(_,J.theta)),J.phi=Math.max(I,Math.min(B,J.phi)),J.radius=Math.max(u.minDistance,Math.min(u.maxDistance,J.radius)),K.phi+=(J.phi-K.phi)*f,K.theta+=(J.theta-K.theta)*f,K.radius+=(J.radius-K.radius)*f,u.target.add(Q);var t=K.radius*Math.sin(Math.max(1e-6,K.phi));U.x=t*Math.sin(K.theta),U.y=K.radius*Math.cos(K.phi),U.z=t*Math.cos(K.theta),s.position.copy(u.target).add(U),s.lookAt(u.target),G.theta*=M,G.phi*=M,Q.multiply(M),G.radius=1},this.forcePosition=function(){U.copy(s.position).sub(u.target),K.radius=J.radius=U.distance(),K.theta=J.theta=Math.atan2(U.x,U.z),K.phi=J.phi=Math.acos(Math.min(Math.max(U.y/J.radius,-1),1)),s.lookAt(u.target)};var W=new t.Vec2,$=new t.Vec2,ee=new t.Vec2,te=a.NONE;function ae(){return Math.pow(.95,X)}this.mouseButtons={ORBIT:0,ZOOM:1,PAN:2};var ie=function(e,t){var a=c===document?document.body:c;i.copy(s.position).sub(u.target);var n,o,r=i.distance();r*=Math.tan((s.fov||45)/2*Math.PI/180),n=2*e*r/a.clientHeight,o=s.matrix,i.set(o[0],o[1],o[2]),i.multiply(-n),Q.add(i),function(e,t){i.set(t[4],t[5],t[6]),i.multiply(e),Q.add(i)}(2*t*r/a.clientHeight,s.matrix)};function ne(e){G.radius/=e}function oe(e,t){n.set(e,t),o.sub(n,W).multiply(L);var a=c===document?document.body:c;G.theta-=2*Math.PI*o.x/a.clientHeight,G.phi-=2*Math.PI*o.y/a.clientHeight,W.copy(n)}function se(e,t){n.set(e,t),o.sub(n,$).multiply(k),ie(o.x,o.y),$.copy(n)}var ue=function(e){if(u.enabled){switch(e.button){case u.mouseButtons.ORBIT:if(!1===w)return;W.set(e.clientX,e.clientY),te=a.ROTATE;break;case u.mouseButtons.ZOOM:if(!1===A)return;ee.set(e.clientX,e.clientY),te=a.DOLLY;break;case u.mouseButtons.PAN:if(!1===T)return;$.set(e.clientX,e.clientY),te=a.PAN}te!==a.NONE&&(window.addEventListener("mousemove",re,!1),window.addEventListener("mouseup",he,!1))}},re=function(e){if(u.enabled)switch(te){case a.ROTATE:if(!1===w)return;oe(e.clientX,e.clientY);break;case a.DOLLY:if(!1===A)return;!function(e){n.set(e.clientX,e.clientY),o.sub(n,ee),o.y>0?ne(ae()):o.y<0&&ne(1/ae()),ee.copy(n)}(e);break;case a.PAN:if(!1===T)return;se(e.clientX,e.clientY)}},he=function e(){window.removeEventListener("mousemove",re,!1),window.removeEventListener("mouseup",e,!1),te=a.NONE},ce=function(e){u.enabled&&A&&(te===a.NONE||te===a.ROTATE)&&(e.stopPropagation(),e.preventDefault(),e.deltaY<0?ne(1/ae()):e.deltaY>0&&ne(ae()))},de=function(e){if(u.enabled)switch(e.preventDefault(),e.touches.length){case 1:if(!1===w)return;W.set(e.touches[0].pageX,e.touches[0].pageY),te=a.ROTATE;break;case 2:if(!1===A&&!1===T)return;!function(e){if(A){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+a*a);ee.set(0,i)}if(T){var n=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);$.set(n,o)}}(e),te=a.DOLLY_PAN;break;default:te=a.NONE}},pe=function(e){if(u.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===w)return;oe(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!1===A&&!1===T)return;!function(e){if(A){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+a*a);n.set(0,i),o.set(0,Math.pow(n.y/ee.y,X)),ne(o.y),ee.copy(n)}T&&se(.5*(e.touches[0].pageX+e.touches[1].pageX),.5*(e.touches[0].pageY+e.touches[1].pageY))}(e);break;default:te=a.NONE}},ve=function(){u.enabled&&(te=a.NONE)},me=function(e){u.enabled&&e.preventDefault()};this.remove=function(){c.removeEventListener("contextmenu",me),c.removeEventListener("mousedown",ue),c.removeEventListener("wheel",ce),c.removeEventListener("touchstart",de),c.removeEventListener("touchend",ve),c.removeEventListener("touchmove",pe),window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",he)},c.addEventListener("contextmenu",me,!1),c.addEventListener("mousedown",ue,!1),c.addEventListener("wheel",ce,{passive:!1}),c.addEventListener("touchstart",de,{passive:!1}),c.addEventListener("touchend",ve,!1),c.addEventListener("touchmove",pe,{passive:!1})}
},{"../math/Vec3.js":"RRKI","../math/Vec2.js":"o05s"}],"KwBn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Geometry=void 0;var t=require("../math/Vec3.js");function e(t){return a(t)||n(t)||i(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function n(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function a(t){if(Array.isArray(t))return s(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}var h=new t.Vec3,c=1,f=1,l=!1,b=function(){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in o(this,r),t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=e,this.id=c++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state,e)this.addAttribute(i,e[i])}return d(r,[{key:"addAttribute",value:function(t,e){if(this.attributes[t]=e,e.id=f++,e.size=e.size||1,e.type=e.type||(e.data.constructor===Float32Array?this.gl.FLOAT:e.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),e.target="index"===t?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,e.normalized=e.normalized||!1,e.stride=e.stride||0,e.offset=e.offset||0,e.count=e.count||(e.stride?e.data.byteLength/e.stride:e.data.length/e.size),e.divisor=e.instanced||0,e.needsUpdate=!1,e.buffer||(e.buffer=this.gl.createBuffer(),this.updateAttribute(e)),e.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==e.count*e.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,e.count*e.divisor);this.instancedCount=e.count*e.divisor}else"index"===t?this.drawRange.count=e.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,e.count))}},{key:"updateAttribute",value:function(t){this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),this.gl.bufferData(t.target,t.data,this.gl.STATIC_DRAW),t.needsUpdate=!1}},{key:"setIndex",value:function(t){this.addAttribute("index",t)}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"setInstancedCount",value:function(t){this.instancedCount=t}},{key:"createVAO",value:function(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}},{key:"bindAttributes",value:function(t){var e=this;t.attributeLocations.forEach(function(t,r){var i=r.name,n=r.type;if(e.attributes[i]){var a=e.attributes[i];e.gl.bindBuffer(a.target,a.buffer),e.glState.boundBuffer=a.buffer;var s=1;35674===n&&(s=2),35675===n&&(s=3),35676===n&&(s=4);for(var o=a.size/s,u=1===s?0:s*s*s,d=1===s?0:s*s,h=0;h<s;h++)e.gl.vertexAttribPointer(t+h,o,a.type,a.normalized,a.stride+u,a.offset+h*d),e.gl.enableVertexAttribArray(t+h),e.gl.renderer.vertexAttribDivisor(t+h,a.divisor)}else console.warn("active attribute ".concat(i," not being supplied"))}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}},{key:"draw",value:function(t){var e=this,r=t.program,i=t.mode,n=void 0===i?this.gl.TRIANGLES:i;this.gl.renderer.currentGeometry!=="".concat(this.id,"_").concat(r.attributeOrder)&&(this.VAOs[r.attributeOrder]||this.createVAO(r),this.gl.renderer.bindVertexArray(this.VAOs[r.attributeOrder]),this.gl.renderer.currentGeometry="".concat(this.id,"_").concat(r.attributeOrder)),r.attributeLocations.forEach(function(t,r){var i=r.name,n=e.attributes[i];n.needsUpdate&&e.updateAttribute(n)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.drawRange.start,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+2*this.drawRange.start):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}},{key:"getPositionArray",value:function(){var t=this.attributes.position;return t.min?[].concat(e(t.min),e(t.max)):t.data?t.data:l?void 0:(console.warn("No position buffer data found to compute bounds"),l=!0)}},{key:"computeBoundingBox",value:function(e){e||(e=this.getPositionArray()),this.bounds||(this.bounds={min:new t.Vec3,max:new t.Vec3,center:new t.Vec3,scale:new t.Vec3,radius:1/0});var r=this.bounds.min,i=this.bounds.max,n=this.bounds.center,a=this.bounds.scale;r.set(1/0),i.set(-1/0);for(var s=0,o=e.length;s<o;s+=3){var u=e[s],d=e[s+1],h=e[s+2];r.x=Math.min(u,r.x),r.y=Math.min(d,r.y),r.z=Math.min(h,r.z),i.x=Math.max(u,i.x),i.y=Math.max(d,i.y),i.z=Math.max(h,i.z)}a.sub(i,r),n.add(r,i).divide(2)}},{key:"computeBoundingSphere",value:function(t){t||(t=this.getPositionArray()),this.bounds||this.computeBoundingBox(t);for(var e=0,r=0,i=t.length;r<i;r+=3)h.fromArray(t,r),e=Math.max(e,this.bounds.center.squaredDistance(h));this.bounds.radius=Math.sqrt(e)}},{key:"remove",value:function(){for(var t in this.vao&&this.gl.renderer.deleteVertexArray(this.vao),this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}]),r}();exports.Geometry=b;
},{"../math/Vec3.js":"TrsQ"}],"iZzF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Plane=void 0;var t=require("../core/Geometry.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=l();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?f(t):n}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(e){i(u,t.Geometry);var r=c(u);function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.width,i=void 0===o?1:o,c=e.height,a=void 0===c?1:c,f=e.widthSegments,l=void 0===f?1:f,s=e.heightSegments,y=void 0===s?1:s,p=e.attributes,v=void 0===p?{}:p;n(this,u);var d=l,h=y,b=(d+1)*(h+1),g=d*h*6,m=new Float32Array(3*b),w=new Float32Array(3*b),O=new Float32Array(2*b),P=b>65536?new Uint32Array(g):new Uint16Array(g);return u.buildPlane(m,w,O,P,i,a,0,d,h),Object.assign(v,{position:{size:3,data:m},normal:{size:3,data:w},uv:{size:2,data:O},index:{data:P}}),r.call(this,t,v)}return o(u,null,[{key:"buildPlane",value:function(t,e,n,r,o,i,u,c,a){for(var f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,s=arguments.length>11&&void 0!==arguments[11]?arguments[11]:2,y=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:-1,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,d=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,h=v,b=o/c,g=i/a,m=0;m<=a;m++)for(var w=m*g-i/2,O=0;O<=c;O++,v++){var P=O*b-o/2;if(t[3*v+f]=P*y,t[3*v+l]=w*p,t[3*v+s]=u/2,e[3*v+f]=0,e[3*v+l]=0,e[3*v+s]=u>=0?1:-1,n[2*v]=O/c,n[2*v+1]=1-m/a,m!==a&&O!==c){var j=h+O+m*(c+1),_=h+O+(m+1)*(c+1),S=h+O+(m+1)*(c+1)+1,x=h+O+m*(c+1)+1;r[6*d]=j,r[6*d+1]=_,r[6*d+2]=x,r[6*d+3]=_,r[6*d+4]=S,r[6*d+5]=x,d++}}}}]),u}();exports.Plane=y;
},{"../core/Geometry.js":"KwBn"}],"RXYf":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Program=void 0;var n=1,i={},a=function(){function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.vertex,s=i.fragment,h=i.uniforms,u=void 0===h?{}:h,c=i.transparent,l=void 0!==c&&c,d=i.cullFace,g=void 0===d?r.BACK:d,f=i.frontFace,m=void 0===f?r.CCW:f,p=i.depthTest,v=void 0===p||p,F=i.depthWrite,b=void 0===F||F,S=i.depthFunc,A=void 0===S?r.LESS:S;e(this,t),r.canvas||console.error("gl not passed as fist argument to Program"),this.gl=r,this.uniforms=u,this.id=n++,a||console.warn("vertex shader not supplied"),s||console.warn("fragment shader not supplied"),this.transparent=l,this.cullFace=g,this.frontFace=m,this.depthTest=v,this.depthWrite=b,this.depthFunc=A,this.blendFunc={},this.blendEquation={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA));var E=r.createShader(r.VERTEX_SHADER);r.shaderSource(E,a),r.compileShader(E),""!==r.getShaderInfoLog(E)&&console.warn("".concat(r.getShaderInfoLog(E),"\nVertex Shader\n").concat(o(a)));var P=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(P,s),r.compileShader(P),""!==r.getShaderInfoLog(P)&&console.warn("".concat(r.getShaderInfoLog(P),"\nFragment Shader\n").concat(o(s))),this.program=r.createProgram(),r.attachShader(this.program,E),r.attachShader(this.program,P),r.linkProgram(this.program),!r.getProgramParameter(this.program,r.LINK_STATUS))return console.warn(r.getProgramInfoLog(this.program));r.deleteShader(E),r.deleteShader(P),this.uniformLocations=new Map;for(var L=r.getProgramParameter(this.program,r.ACTIVE_UNIFORMS),y=0;y<L;y++){var C=r.getActiveUniform(this.program,y);this.uniformLocations.set(C,r.getUniformLocation(this.program,C.name));var T=C.name.match(/(\w+)/g);C.uniformName=T[0],3===T.length?(C.isStructArray=!0,C.structIndex=Number(T[1]),C.structProperty=T[2]):2===T.length&&isNaN(Number(T[1]))&&(C.isStruct=!0,C.structProperty=T[1])}this.attributeLocations=new Map;for(var _=[],w=r.getProgramParameter(this.program,r.ACTIVE_ATTRIBUTES),N=0;N<w;N++){var I=r.getActiveAttrib(this.program,N),x=r.getAttribLocation(this.program,I.name);_[x]=I.name,this.attributeLocations.set(I,x)}this.attributeOrder=_.join("")}return r(t,[{key:"setBlendFunc",value:function(e,t,r,n){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=r,this.blendFunc.dstAlpha=n,e&&(this.transparent=!0)}},{key:"setBlendEquation",value:function(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}},{key:"applyState",value:function(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.blendEquation.modeRGB&&this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha)}},{key:"use",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).flipFaces,r=void 0!==t&&t,n=-1;this.gl.renderer.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.currentProgram=this.id),this.uniformLocations.forEach(function(t,r){var i=r.uniformName,a=e.uniforms[i];if(r.isStruct&&(a=a[r.structProperty],i+=".".concat(r.structProperty)),r.isStructArray&&(a=a[r.structIndex][r.structProperty],i+="[".concat(r.structIndex,"].").concat(r.structProperty)),!a)return d("Active uniform ".concat(i," has not been supplied"));if(a&&void 0===a.value)return d("".concat(i," uniform is missing a value parameter"));if(a.value.texture)return n+=1,a.value.update(n),s(e.gl,r.type,t,n);if(a.value.length&&a.value[0].texture){var o=[];return a.value.forEach(function(e){n+=1,e.update(n),o.push(n)}),s(e.gl,r.type,t,o)}s(e.gl,r.type,t,a.value)}),this.applyState(),r&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}},{key:"remove",value:function(){this.gl.deleteProgram(this.program)}}]),t}();function s(e,t,r,n){n=n.length?h(n):n;var i=e.renderer.state.uniformLocations.get(r);if(n.length)if(void 0===i||i.length!==n.length)e.renderer.state.uniformLocations.set(r,n.slice(0));else{if(u(i,n))return;i.set?i.set(n):c(i,n),e.renderer.state.uniformLocations.set(r,i)}else{if(i===n)return;e.renderer.state.uniformLocations.set(r,n)}switch(t){case 5126:return n.length?e.uniform1fv(r,n):e.uniform1f(r,n);case 35664:return e.uniform2fv(r,n);case 35665:return e.uniform3fv(r,n);case 35666:return e.uniform4fv(r,n);case 35670:case 5124:case 35678:case 35680:return n.length?e.uniform1iv(r,n):e.uniform1i(r,n);case 35671:case 35667:return e.uniform2iv(r,n);case 35672:case 35668:return e.uniform3iv(r,n);case 35673:case 35669:return e.uniform4iv(r,n);case 35674:return e.uniformMatrix2fv(r,!1,n);case 35675:return e.uniformMatrix3fv(r,!1,n);case 35676:return e.uniformMatrix4fv(r,!1,n)}}function o(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function h(e){var t=e.length,r=e[0].length;if(void 0===r)return e;var n=t*r,a=i[n];a||(i[n]=a=new Float32Array(n));for(var s=0;s<t;s++)a.set(e[s],s*r);return a}function u(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function c(e,t){for(var r=0,n=e.length;r<n;r++)e[r]=t[r]}exports.Program=a;var l=0;function d(e){l>100||(console.warn(e),++l>100&&console.warn("More than 100 program warnings - stopping logs."))}
},{}],"l0rf":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Texture=void 0;var s=new Uint8Array(4);function h(t){return 0==(t&t-1)}var a=1,r=function(){function i(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=s.image,r=s.target,l=void 0===r?e.TEXTURE_2D:r,g=s.type,n=void 0===g?e.UNSIGNED_BYTE:g,p=s.format,m=void 0===p?e.RGBA:p,o=s.internalFormat,E=void 0===o?m:o,T=s.wrapS,d=void 0===T?e.CLAMP_TO_EDGE:T,u=s.wrapT,A=void 0===u?e.CLAMP_TO_EDGE:u,_=s.generateMipmaps,f=void 0===_||_,v=s.minFilter,x=void 0===v?f?e.NEAREST_MIPMAP_LINEAR:e.LINEAR:v,w=s.magFilter,S=void 0===w?e.LINEAR:w,y=s.premultiplyAlpha,P=void 0!==y&&y,R=s.unpackAlignment,U=void 0===R?4:R,c=s.flipY,I=void 0===c?l==e.TEXTURE_2D:c,F=s.anisotropy,M=void 0===F?0:F,N=s.level,L=void 0===N?0:N,X=s.width,B=s.height,D=void 0===B?X:B;t(this,i),this.gl=e,this.id=a++,this.image=h,this.target=l,this.type=n,this.format=m,this.internalFormat=E,this.minFilter=x,this.magFilter=S,this.wrapS=d,this.wrapT=A,this.generateMipmaps=f,this.premultiplyAlpha=P,this.unpackAlignment=U,this.flipY=I,this.anisotropy=Math.min(M,this.gl.renderer.parameters.maxAnisotropy),this.level=L,this.width=X,this.height=D,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}return e(i,[{key:"bind",value:function(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=!(this.image===this.store.image&&!this.needsUpdate);if((i||this.glState.textureUnits[t]!==this.id)&&(this.gl.renderer.activeTexture(t),this.bind()),i){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(var e=0;e<6;e++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+e,this.level,this.internalFormat,this.format,this.type,this.image[e]);else if(ArrayBuffer.isView(this.image))this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(var a=0;a<this.image.length;a++)this.gl.compressedTexImage2D(this.target,a,this.internalFormat,this.image[a].width,this.image[a].height,0,this.image[a].data);else this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image);this.generateMipmaps&&(this.gl.renderer.isWebgl2||h(this.image.width)&&h(this.image.height)?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(var r=0;r<6;r++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,s);else this.width?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,s);this.store.image=this.image}}}]),i}();exports.Texture=r;
},{}],"RTxg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromMat4=t,exports.fromQuat=n,exports.copy=e,exports.set=o,exports.identity=u,exports.transpose=s,exports.invert=i,exports.determinant=a,exports.multiply=c,exports.translate=p,exports.rotate=f,exports.scale=x,exports.normalFromMat4=l,exports.projection=v,exports.add=m,exports.subtract=d,exports.multiplyScalar=y;var r=1e-6;function t(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r}function n(r,t){var n=t[0],e=t[1],o=t[2],u=t[3],s=n+n,i=e+e,a=o+o,c=n*s,p=e*s,f=e*i,x=o*s,l=o*i,v=o*a,m=u*s,d=u*i,y=u*a;return r[0]=1-f-v,r[3]=p-y,r[6]=x+d,r[1]=p+y,r[4]=1-c-v,r[7]=l-m,r[2]=x-d,r[5]=l+m,r[8]=1-c-f,r}function e(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function o(r,t,n,e,o,u,s,i,a,c){return r[0]=t,r[1]=n,r[2]=e,r[3]=o,r[4]=u,r[5]=s,r[6]=i,r[7]=a,r[8]=c,r}function u(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function s(r,t){if(r===t){var n=t[1],e=t[2],o=t[5];r[1]=t[3],r[2]=t[6],r[3]=n,r[5]=t[7],r[6]=e,r[7]=o}else r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8];return r}function i(r,t){var n=t[0],e=t[1],o=t[2],u=t[3],s=t[4],i=t[5],a=t[6],c=t[7],p=t[8],f=p*s-i*c,x=-p*u+i*a,l=c*u-s*a,v=n*f+e*x+o*l;return v?(v=1/v,r[0]=f*v,r[1]=(-p*e+o*c)*v,r[2]=(i*e-o*s)*v,r[3]=x*v,r[4]=(p*n-o*a)*v,r[5]=(-i*n+o*u)*v,r[6]=l*v,r[7]=(-c*n+e*a)*v,r[8]=(s*n-e*u)*v,r):null}function a(r){var t=r[0],n=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],a=r[7],c=r[8];return t*(c*u-s*a)+n*(-c*o+s*i)+e*(a*o-u*i)}function c(r,t,n){var e=t[0],o=t[1],u=t[2],s=t[3],i=t[4],a=t[5],c=t[6],p=t[7],f=t[8],x=n[0],l=n[1],v=n[2],m=n[3],d=n[4],y=n[5],M=n[6],b=n[7],h=n[8];return r[0]=x*e+l*s+v*c,r[1]=x*o+l*i+v*p,r[2]=x*u+l*a+v*f,r[3]=m*e+d*s+y*c,r[4]=m*o+d*i+y*p,r[5]=m*u+d*a+y*f,r[6]=M*e+b*s+h*c,r[7]=M*o+b*i+h*p,r[8]=M*u+b*a+h*f,r}function p(r,t,n){var e=t[0],o=t[1],u=t[2],s=t[3],i=t[4],a=t[5],c=t[6],p=t[7],f=t[8],x=n[0],l=n[1];return r[0]=e,r[1]=o,r[2]=u,r[3]=s,r[4]=i,r[5]=a,r[6]=x*e+l*s+c,r[7]=x*o+l*i+p,r[8]=x*u+l*a+f,r}function f(r,t,n){var e=t[0],o=t[1],u=t[2],s=t[3],i=t[4],a=t[5],c=t[6],p=t[7],f=t[8],x=Math.sin(n),l=Math.cos(n);return r[0]=l*e+x*s,r[1]=l*o+x*i,r[2]=l*u+x*a,r[3]=l*s-x*e,r[4]=l*i-x*o,r[5]=l*a-x*u,r[6]=c,r[7]=p,r[8]=f,r}function x(r,t,n){var e=n[0],o=n[1];return r[0]=e*t[0],r[1]=e*t[1],r[2]=e*t[2],r[3]=o*t[3],r[4]=o*t[4],r[5]=o*t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function l(r,t){var n=t[0],e=t[1],o=t[2],u=t[3],s=t[4],i=t[5],a=t[6],c=t[7],p=t[8],f=t[9],x=t[10],l=t[11],v=t[12],m=t[13],d=t[14],y=t[15],M=n*i-e*s,b=n*a-o*s,h=n*c-u*s,j=e*a-o*i,_=e*c-u*i,F=o*c-u*a,O=p*m-f*v,P=p*d-x*v,Q=p*y-l*v,S=f*d-x*m,g=f*y-l*m,k=x*y-l*d,q=M*k-b*g+h*S+j*Q-_*P+F*O;return q?(q=1/q,r[0]=(i*k-a*g+c*S)*q,r[1]=(a*Q-s*k-c*P)*q,r[2]=(s*g-i*Q+c*O)*q,r[3]=(o*g-e*k-u*S)*q,r[4]=(n*k-o*Q+u*P)*q,r[5]=(e*Q-n*g-u*O)*q,r[6]=(m*F-d*_+y*j)*q,r[7]=(d*h-v*F-y*b)*q,r[8]=(v*_-m*h+y*M)*q,r):null}function v(r,t,n){return r[0]=2/t,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/n,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function m(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r[3]=t[3]+n[3],r[4]=t[4]+n[4],r[5]=t[5]+n[5],r[6]=t[6]+n[6],r[7]=t[7]+n[7],r[8]=t[8]+n[8],r}function d(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r[3]=t[3]-n[3],r[4]=t[4]-n[4],r[5]=t[5]-n[5],r[6]=t[6]-n[6],r[7]=t[7]-n[7],r[8]=t[8]-n[8],r}function y(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r[4]=t[4]*n,r[5]=t[5]*n,r[6]=t[6]*n,r[7]=t[7]*n,r[8]=t[8]*n,r}
},{}],"aakI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mat3=void 0;var t=n(require("./functions/Mat3Func.js"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}function f(t){var e=y();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||!h(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return p(t,arguments,b(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,t)})(t)}function p(t,e,n){return(p=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&v(o,n.prototype),o}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){c(r,s(Array));var n=f(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return o(this,r),a(t=n.call(this,e,i,u,c,f,s,p,y,h),l(t))}return u(r,[{key:"set",value:function(e,n,r,o,i,u,c,f,a){return e.length?this.copy(e):(t.set(this,e,n,r,o,i,u,c,f,a),this)}},{key:"translate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return t.translate(this,n,e),this}},{key:"rotate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return t.rotate(this,n,e),this}},{key:"scale",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return t.scale(this,n,e),this}},{key:"multiply",value:function(e,n){return n?t.multiply(this,e,n):t.multiply(this,this,e),this}},{key:"identity",value:function(){return t.identity(this),this}},{key:"copy",value:function(e){return t.copy(this,e),this}},{key:"fromMatrix4",value:function(e){return t.fromMat4(this,e),this}},{key:"fromQuaternion",value:function(e){return t.fromQuat(this,e),this}},{key:"fromBasis",value:function(t,e,n){return this.set(t[0],t[1],t[2],e[0],e[1],e[2],n[0],n[1],n[2]),this}},{key:"inverse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return t.invert(this,e),this}},{key:"getNormalMatrix",value:function(e){return t.normalFromMat4(this,e),this}}]),r}();exports.Mat3=d;
},{"./functions/Mat3Func.js":"RTxg"}],"j0Iy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mesh=void 0;var r=require("./Transform.js"),e=require("../math/Mat3.js"),t=require("../math/Mat4.js");function o(r){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function n(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function i(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function a(r,e,t){return e&&i(r.prototype,e),t&&i(r,t),r}function u(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&l(r,e)}function l(r,e){return(l=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r})(r,e)}function s(r){var e=m();return function(){var t,o=p(r);if(e){var n=p(this).constructor;t=Reflect.construct(o,arguments,n)}else t=o.apply(this,arguments);return c(this,t)}}function c(r,e){return!e||"object"!==o(e)&&"function"!=typeof e?f(r):e}function f(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(r){return!1}}function p(r){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}var h=0,d=function(o){u(l,r.Transform);var i=s(l);function l(r){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=a.geometry,s=a.program,c=a.mode,f=void 0===c?r.TRIANGLES:c,m=a.frustumCulled,p=void 0===m||m,d=a.renderOrder,v=void 0===d?0:d;return n(this,l),o=i.call(this),r.canvas||console.error("gl not passed as first argument to Mesh"),o.gl=r,o.id=h++,o.geometry=u,o.program=s,o.mode=f,o.frustumCulled=p,o.renderOrder=v,o.modelViewMatrix=new t.Mat4,o.normalMatrix=new e.Mat3,o.beforeRenderCallbacks=[],o.afterRenderCallbacks=[],o}return a(l,[{key:"onBeforeRender",value:function(r){return this.beforeRenderCallbacks.push(r),this}},{key:"onAfterRender",value:function(r){return this.afterRenderCallbacks.push(r),this}},{key:"draw",value:function(){var r=this,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).camera;this.beforeRenderCallbacks.forEach(function(t){return t&&t({mesh:r,camera:e})}),e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix);var t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(function(t){return t&&t({mesh:r,camera:e})})}}]),l}();exports.Mesh=d;
},{"./Transform.js":"hlVi","../math/Mat3.js":"aakI","../math/Mat4.js":"ulua"}],"eAQt":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvarying vec2 vUV;\n\nvoid main() {\n\n    vec3 pos = position;\n\n    // gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    gl_Position = vec4(pos, 1.0);\n\n    vUV = uv;\n\n}";
},{}],"TBmU":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D _Video;\nuniform sampler2D _Output;\nuniform vec2 _Resolution;\n\nvarying vec2 vUV;\n\n#define FLOWSTR 0.003\n\nvoid main() {\n\n    vec2 cameraUV = vec2(1.0 - vUV.x, vUV.y);\n    cameraUV -= 0.5;\n    float aspect = (_Resolution.x / _Resolution.y) / (640.0 / 480.0);\n    cameraUV.y /= aspect;\n    cameraUV += 0.5;\n\n    vec3 flow = texture2D(_Output, vec2(1.0 - cameraUV.x, cameraUV.y)).xyz;\n    // vec3 camera = texture2D(_Video, cameraUV + flow.xy).xyz;\n    \n    float flowMag = min(1.0, length(flow.xy));\n    flow.xy *= FLOWSTR;\n\n    float r = texture2D(_Video, cameraUV + (vec2(0.003, 0.0) *flowMag) + flow.xy).x;\n    float g = texture2D(_Video, cameraUV + (vec2(0.0, 0.0015) *flowMag) + flow.xy).y;\n    float b = texture2D(_Video, cameraUV + (vec2(-0.003, 0.0) *flowMag) + flow.xy).z;\n\n    vec3 col = vec3(r,g,b);\n\n    gl_FragColor = vec4(col, 1.0);\n\n}";
},{}],"JZpG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../vendors/ogl/src/extras/Plane"),t=require("../../Vendors/ogl/src/core/Program"),r=require("../../Vendors/ogl/src/core/Texture"),n=require("../../Vendors/ogl/src/core/Mesh"),o=require("../../Vendors/ogl/src/math/Vec2");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=g();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=require("./shader/quad.vert"),m=require("./shader/quad.frag"),v=function(u){l(f,n.Mesh);var c=s(f);function f(n){var u;i(this,f),(u=c.call(this,n)).gl=n,u.geometry=new e.Plane(u.gl,{width:2,height:2}),u.texture=new r.Texture(u.gl,{generateMipmaps:!1,minFilter:u.gl.LINEAR,magFilter:u.gl.LINEAR});var a={_Video:{value:u.texture},_Output:{value:new r.Texture(u.gl)},_Resolution:{value:new o.Vec2(u.gl.renderer.width,u.gl.renderer.height)}};return u.program=new t.Program(u.gl,{vertex:d,fragment:m,uniforms:a,transparent:!1}),u}return a(f,[{key:"update",value:function(e){var t=e.inputVideo;t.readyState>=t.HAVE_CURRENT_DATA&&(this.texture.image=t,this.texture.needsUpdate=!0),this.program.uniforms._Resolution.value.set(this.gl.renderer.width,this.gl.renderer.height)}},{key:"Output",set:function(e){this.program.uniforms._Output.value=e}}]),f}();exports.default=v;
},{"../../vendors/ogl/src/extras/Plane":"iZzF","../../Vendors/ogl/src/core/Program":"RXYf","../../Vendors/ogl/src/core/Texture":"l0rf","../../Vendors/ogl/src/core/Mesh":"j0Iy","../../Vendors/ogl/src/math/Vec2":"o05s","./shader/quad.vert":"eAQt","./shader/quad.frag":"TBmU"}],"oGkT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Geometry=void 0;var t=require("../math/Vec3.js");function e(t){return a(t)||n(t)||i(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function n(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function a(t){if(Array.isArray(t))return s(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}var h=new t.Vec3,c=1,f=1,l=!1,b=function(){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in o(this,r),t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=e,this.id=c++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state,e)this.addAttribute(i,e[i])}return d(r,[{key:"addAttribute",value:function(t,e){if(this.attributes[t]=e,e.id=f++,e.size=e.size||1,e.type=e.type||(e.data.constructor===Float32Array?this.gl.FLOAT:e.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),e.target="index"===t?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,e.normalized=e.normalized||!1,e.stride=e.stride||0,e.offset=e.offset||0,e.count=e.count||(e.stride?e.data.byteLength/e.stride:e.data.length/e.size),e.divisor=e.instanced||0,e.needsUpdate=!1,e.buffer||(e.buffer=this.gl.createBuffer(),this.updateAttribute(e)),e.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==e.count*e.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,e.count*e.divisor);this.instancedCount=e.count*e.divisor}else"index"===t?this.drawRange.count=e.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,e.count))}},{key:"updateAttribute",value:function(t){this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),this.gl.bufferData(t.target,t.data,this.gl.STATIC_DRAW),t.needsUpdate=!1}},{key:"setIndex",value:function(t){this.addAttribute("index",t)}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"setInstancedCount",value:function(t){this.instancedCount=t}},{key:"createVAO",value:function(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}},{key:"bindAttributes",value:function(t){var e=this;t.attributeLocations.forEach(function(t,r){var i=r.name,n=r.type;if(e.attributes[i]){var a=e.attributes[i];e.gl.bindBuffer(a.target,a.buffer),e.glState.boundBuffer=a.buffer;var s=1;35674===n&&(s=2),35675===n&&(s=3),35676===n&&(s=4);for(var o=a.size/s,u=1===s?0:s*s*s,d=1===s?0:s*s,h=0;h<s;h++)e.gl.vertexAttribPointer(t+h,o,a.type,a.normalized,a.stride+u,a.offset+h*d),e.gl.enableVertexAttribArray(t+h),e.gl.renderer.vertexAttribDivisor(t+h,a.divisor)}else console.warn("active attribute ".concat(i," not being supplied"))}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}},{key:"draw",value:function(t){var e=this,r=t.program,i=t.mode,n=void 0===i?this.gl.TRIANGLES:i;this.gl.renderer.currentGeometry!=="".concat(this.id,"_").concat(r.attributeOrder)&&(this.VAOs[r.attributeOrder]||this.createVAO(r),this.gl.renderer.bindVertexArray(this.VAOs[r.attributeOrder]),this.gl.renderer.currentGeometry="".concat(this.id,"_").concat(r.attributeOrder)),r.attributeLocations.forEach(function(t,r){var i=r.name,n=e.attributes[i];n.needsUpdate&&e.updateAttribute(n)}),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.drawRange.start,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+2*this.drawRange.start):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}},{key:"getPositionArray",value:function(){var t=this.attributes.position;return t.min?[].concat(e(t.min),e(t.max)):t.data?t.data:l?void 0:(console.warn("No position buffer data found to compute bounds"),l=!0)}},{key:"computeBoundingBox",value:function(e){e||(e=this.getPositionArray()),this.bounds||(this.bounds={min:new t.Vec3,max:new t.Vec3,center:new t.Vec3,scale:new t.Vec3,radius:1/0});var r=this.bounds.min,i=this.bounds.max,n=this.bounds.center,a=this.bounds.scale;r.set(1/0),i.set(-1/0);for(var s=0,o=e.length;s<o;s+=3){var u=e[s],d=e[s+1],h=e[s+2];r.x=Math.min(u,r.x),r.y=Math.min(d,r.y),r.z=Math.min(h,r.z),i.x=Math.max(u,i.x),i.y=Math.max(d,i.y),i.z=Math.max(h,i.z)}a.sub(i,r),n.add(r,i).divide(2)}},{key:"computeBoundingSphere",value:function(t){t||(t=this.getPositionArray()),this.bounds||this.computeBoundingBox(t);for(var e=0,r=0,i=t.length;r<i;r+=3)h.fromArray(t,r),e=Math.max(e,this.bounds.center.squaredDistance(h));this.bounds.radius=Math.sqrt(e)}},{key:"remove",value:function(){for(var t in this.vao&&this.gl.renderer.deleteVertexArray(this.vao),this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}]),r}();exports.Geometry=b;
},{"../math/Vec3.js":"RRKI"}],"yWCG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Triangle=void 0;var t=require("../core/Geometry.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=f();return function(){var r,n=a(t);if(e){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}function i(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?u(t):r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(e){n(i,t.Geometry);var o=c(i);function i(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).attributes,n=void 0===e?{}:e;return r(this,i),Object.assign(n,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),o.call(this,t,n)}return i}();exports.Triangle=s;
},{"../core/Geometry.js":"oGkT"}],"tutl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTarget=void 0;var e=require("./Texture.js");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function i(r){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=h.width,l=void 0===s?r.canvas.width:s,f=h.height,g=void 0===f?r.canvas.height:f,E=h.target,a=void 0===E?r.FRAMEBUFFER:E,n=h.color,u=void 0===n?1:n,d=h.depth,T=void 0===d||d,R=h.stencil,o=void 0!==R&&R,p=h.depthTexture,N=void 0!==p&&p,F=h.wrapS,b=void 0===F?r.CLAMP_TO_EDGE:F,D=h.wrapT,m=void 0===D?r.CLAMP_TO_EDGE:D,_=h.minFilter,c=void 0===_?r.LINEAR:_,v=h.magFilter,A=void 0===v?c:v,B=h.type,x=void 0===B?r.UNSIGNED_BYTE:B,C=h.format,S=void 0===C?r.RGBA:C,M=h.internalFormat,O=void 0===M?S:M,P=h.unpackAlignment,w=h.premultiplyAlpha;t(this,i),this.gl=r,this.width=l,this.height=g,this.depth=T,this.buffer=this.gl.createFramebuffer(),this.target=a,this.gl.bindFramebuffer(this.target,this.buffer),this.textures=[];for(var H=[],U=0;U<u;U++)this.textures.push(new e.Texture(r,{width:l,height:g,wrapS:b,wrapT:m,minFilter:c,magFilter:A,type:x,format:S,internalFormat:O,unpackAlignment:P,premultiplyAlpha:w,flipY:!1,generateMipmaps:!1})),this.textures[U].update(),this.gl.framebufferTexture2D(this.target,this.gl.COLOR_ATTACHMENT0+U,this.gl.TEXTURE_2D,this.textures[U].texture,0),H.push(this.gl.COLOR_ATTACHMENT0+U);H.length>1&&this.gl.renderer.drawBuffers(H),this.texture=this.textures[0],N&&(this.gl.renderer.isWebgl2||this.gl.renderer.getExtension("WEBGL_depth_texture"))?(this.depthTexture=new e.Texture(r,{width:l,height:g,minFilter:this.gl.NEAREST,magFilter:this.gl.NEAREST,format:this.gl.DEPTH_COMPONENT,internalFormat:r.renderer.isWebgl2?this.gl.DEPTH_COMPONENT16:this.gl.DEPTH_COMPONENT,type:this.gl.UNSIGNED_INT}),this.depthTexture.update(),this.gl.framebufferTexture2D(this.target,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depthTexture.texture,0)):(T&&!o&&(this.depthBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,l,g),this.gl.framebufferRenderbuffer(this.target,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.depthBuffer)),o&&!T&&(this.stencilBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.stencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.STENCIL_INDEX8,l,g),this.gl.framebufferRenderbuffer(this.target,this.gl.STENCIL_ATTACHMENT,this.gl.RENDERBUFFER,this.stencilBuffer)),T&&o&&(this.depthStencilBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthStencilBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_STENCIL,l,g),this.gl.framebufferRenderbuffer(this.target,this.gl.DEPTH_STENCIL_ATTACHMENT,this.gl.RENDERBUFFER,this.depthStencilBuffer))),this.gl.bindFramebuffer(this.target,null)};exports.RenderTarget=i;
},{"./Texture.js":"l0rf"}],"yKI9":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec2 uv;\n\nvarying vec2 vUV;\n\nvoid main() {\n\n    gl_Position = vec4(position, 0.0, 1.0);\n    vUV = uv;\n\n}";
},{}],"E6Fu":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D _CurrentFrame;\nuniform sampler2D _PrevFrame;\nuniform sampler2D _PrevFlow;\n\nuniform vec2 _Resolution;\nuniform vec2 _TexelSize;\nuniform float _Scale;\n\nvarying vec2 vUV;\n\n#define TINY 0.000001\n// #define TINY 0.0000001\n// #define TINY 0.00001\n// #define THRESHOLD 0.001 \n#define THRESHOLD 0.007 \n// #define THRESHOLD 0.01 \n\n//HEAVILY INSPIRED FROM FOLLOWING SHADER: https://github.com/moostrik/ofxFlowTools/blob/master/src/core/opticalflow/ftOpticalFlowShader.h\n//By: Matthias Oostrik https://github.com/moostrik\n\nvoid main() {\n\n    vec2 uv = vec2(1.0 - vUV.x, vUV.y);\n\n    //derivative X\n    float dX = texture2D(_PrevFrame, uv + vec2(_TexelSize.x, 0.0)).x - texture2D(_PrevFrame, uv - vec2(_TexelSize.x, 0.0)).x;\n    dX += texture2D(_CurrentFrame, uv + vec2(_TexelSize.x, 0.0)).x - texture2D(_CurrentFrame, uv - vec2(_TexelSize.x, 0.0)).x;\n\n    //derivative y\n    float dY = texture2D(_PrevFrame, uv + vec2(0.0, _TexelSize.y)).x - texture2D(_PrevFrame, uv - vec2(0.0, _TexelSize.y)).x;\n    dY += texture2D(_CurrentFrame, uv + vec2(0.0, _TexelSize.y)).x - texture2D(_CurrentFrame, uv - vec2(0.0, _TexelSize.y)).x;\n\n    //gradient magnitude\n    float mag = sqrt((dX * dX) + (dY * dY) + TINY);\n\n    //brightness difference\n    float dT = texture2D(_CurrentFrame, uv).x - texture2D(_PrevFrame, uv).x;\n\n    float vX = (dX / mag) * dT;\n    float vY = (dY / mag) * dT;\n\n    vec2 flow = vec2(vX, vY * -1.0);\n\n    float flowMag = length(flow);\n    flowMag = max(flowMag, THRESHOLD);\n    flowMag -= THRESHOLD;\n    flowMag /= (1.0 - THRESHOLD);\n    // flowMag = flowMag * flowMag;\n    flow += TINY; //prevents divisions by 0 when normalizing\n    flow = normalize(flow) * min(flowMag, 1.0);\n    flow *= _Scale; \n\n    vec3 prevFlow = texture2D(_PrevFlow, vUV).xyz;\n\n    vec3 outPut = mix(vec3(flow, length(flow)), prevFlow, 0.97);\n    \n    // gl_FragColor = vec4(vec3(flow, length(flow)), 1.0);\n    gl_FragColor = vec4(outPut, 1.0);\n\n}";
},{}],"Ut8q":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D _CameraFrame;\n\nvarying vec2 vUV;\n\nvoid main() {\n\n    vec3 col = texture2D(_CameraFrame, vUV).xyz;\n    gl_FragColor = vec4(col, 1.0);\n\n}";
},{}],"mEwo":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform vec2 _Resolution;\nuniform sampler2D _Texture;\nuniform bool _Flip;\nuniform vec2 _BlurDirection;\n\nvarying vec2 vUV;\n\n//source: https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/5.glsl\n\nvec4 blur5(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3333333333333333) * direction;\n  color += texture2D(image, uv).x * 0.29411764705882354;\n  color += texture2D(image, uv + (off1 / resolution)).x * 0.35294117647058826;\n  color += texture2D(image, uv - (off1 / resolution)).x * 0.35294117647058826;\n  return color; \n}\n\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv).x * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)).x * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)).x * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)).x * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)).x * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n\n    gl_FragColor = blur9(_Texture, vUV, _Resolution, _BlurDirection);\n\n}";
},{}],"kxLw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../Vendors/ogl/src/core/Transform"),r=require("../../Vendors/ogl/src/extras/Triangle"),t=require("../../Vendors/ogl/src/core/Program"),i=require("../../Vendors/ogl/src/core/Texture"),a=require("../../Vendors/ogl/src/core/Mesh"),s=require("../../Vendors/ogl/src/core/RenderTarget"),h=require("../../Vendors/ogl/src/math/Vec2");function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,r,t){return r&&u(e.prototype,r),t&&u(e,t),e}var o=require("./shaders/triangle.vert"),g=require("./shaders/opticalflow.frag"),c=require("./shaders/capture.frag"),d=require("./shaders/blur.frag"),m=function(){function u(e,r){var t=r.width,i=void 0===t?2:t,a=r.height,s=void 0===a?2:a;n(this,u),this.gl=e,this.width=i,this.height=s,this.firstTick=!0,this.initCameraCapture(),this.initBlurPass(),this.initOpticalFlowPass(),this.initVelocityPass()}return l(u,[{key:"initCameraCapture",value:function(){this.cameraFrame=new i.Texture(this.gl,{generateMipmaps:!1,width:this.width,height:this.height});var h={width:this.width,height:this.height,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,depth:!1};this.currentFrame=new s.RenderTarget(this.gl,h),this.prevFrame=new s.RenderTarget(this.gl,h),this.cameraCaptureScene=new e.Transform;var n={_CameraFrame:{value:this.cameraFrame}};this.cameraCaptureQuad=new a.Mesh(this.gl,{geometry:new r.Triangle(this.gl),program:new t.Program(this.gl,{vertex:o,fragment:c,uniforms:n,transparent:!1})}),this.cameraCaptureQuad.setParent(this.cameraCaptureScene)}},{key:"initBlurPass",value:function(){var i={width:this.width,height:this.height,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR,depth:!1};this.blurTextureWrite=new s.RenderTarget(this.gl,i),this.blurTextureRead=new s.RenderTarget(this.gl,i),this.blurDirectionX=new h.Vec2(1,0),this.blurDirectionY=new h.Vec2(0,1),this.blurScene=new e.Transform;var n={_Texture:{value:this.blurTextureRead.texture},_Resolution:{value:new h.Vec2(this.gl.renderer.width,this.gl.renderer.height)},_Flip:{value:!1},_BlurDirection:{value:new h.Vec2(0,0)}};this.blurQuad=new a.Mesh(this.gl,{geometry:new r.Triangle(this.gl),program:new t.Program(this.gl,{vertex:o,fragment:d,uniforms:n,transparent:!1})}),this.blurQuad.setParent(this.blurScene)}},{key:"initOpticalFlowPass",value:function(){var i={width:this.width,height:this.height,type:this.gl.HALF_FLOAT||this.gl.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES,format:this.gl.RGBA,internalFormat:this.gl.RGBA16F,depth:!1};this.flowVectorTextureWrite=new s.RenderTarget(this.gl,i),this.flowVectorTextureRead=new s.RenderTarget(this.gl,i),this.opticalFlowScene=new e.Transform;var n={_CurrentFrame:{value:this.currentFrame.texture},_PrevFrame:{value:this.prevFrame.texture},_PrevFlow:{value:this.flowVectorTextureRead.texture},_Resolution:{value:new h.Vec2(this.gl.renderer.width,this.gl.renderer.height)},_TexelSize:{value:new h.Vec2(1/this,this.width,1/this.height)},_Scale:{value:800}};this.opticalFlowQuad=new a.Mesh(this.gl,{geometry:new r.Triangle(this.gl),program:new t.Program(this.gl,{uniforms:n,vertex:o,fragment:g,transparent:!1})}),this.opticalFlowQuad.setParent(this.opticalFlowScene)}},{key:"initVelocityPass",value:function(){}},{key:"blurInputVideo",value:function(){this.gl.renderer.autoClear=!1;for(var e=0;e<12;e++){var r=12-e-1;this.blurQuad.program.uniforms._Texture.value=0===e?this.cameraFrame:this.blurTextureRead.texture,this.blurQuad.program.uniforms._BlurDirection.value.set(e%2==0?r:0,e%2==0?0:r),this.blurQuad.program.uniforms._Resolution.value.set(this.gl.renderer.width,this.gl.renderer.height),this.gl.renderer.render({scene:this.blurScene,target:this.blurTextureWrite});var t=this.blurTextureRead;this.blurTextureRead=this.blurTextureWrite,this.blurTextureWrite=t}this.gl.renderer.autoClear=!0}},{key:"saveCameraFrame",value:function(){var e=this.prevFrame;this.prevFrame=this.currentFrame,this.currentFrame=e,this.cameraCaptureQuad.program.uniforms._CameraFrame.value=this.blurTextureRead.texture,this.gl.renderer.render({scene:this.cameraCaptureScene,target:this.currentFrame})}},{key:"update",value:function(e){var r=e.inputVideo;r.readyState>=r.HAVE_CURRENT_DATA&&(this.cameraFrame.image=r,this.cameraFrame.needsUpdate=!0,this.blurInputVideo(),this.saveCameraFrame(),this.firstTick&&(this.blurInputVideo(),this.saveCameraFrame(),this.firstTick=!1)),this.opticalFlowQuad.program.uniforms._CurrentFrame.value=this.currentFrame.texture,this.opticalFlowQuad.program.uniforms._PrevFrame.value=this.prevFrame.texture,this.opticalFlowQuad.program.uniforms._PrevFlow.value=this.flowVectorTextureRead.texture,this.opticalFlowQuad.program.uniforms._Resolution.value.set(this.gl.renderer.width,this.gl.renderer.height),this.opticalFlowQuad.program.uniforms._TexelSize.value.set(1/this.gl.renderer.width,1/this.gl.renderer.height),this.gl.renderer.render({scene:this.opticalFlowScene,target:this.flowVectorTextureWrite});var t=this.flowVectorTextureRead;this.flowVectorTextureRead=this.flowVectorTextureWrite,this.flowVectorTextureWrite=t}}]),u}();exports.default=m;
},{"../../Vendors/ogl/src/core/Transform":"hlVi","../../Vendors/ogl/src/extras/Triangle":"yWCG","../../Vendors/ogl/src/core/Program":"RXYf","../../Vendors/ogl/src/core/Texture":"l0rf","../../Vendors/ogl/src/core/Mesh":"j0Iy","../../Vendors/ogl/src/core/RenderTarget":"tutl","../../Vendors/ogl/src/math/Vec2":"o05s","./shaders/triangle.vert":"yKI9","./shaders/opticalflow.frag":"E6Fu","./shaders/capture.frag":"Ut8q","./shaders/blur.frag":"mEwo"}],"quAm":[function(require,module,exports) {
module.exports="precision highp float;\n#define GLSLIFY 1\n\n    attribute vec2 position;\n    attribute vec2 uv;\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform vec2 texelSize;\n        void main () {\n            vUv = uv;\n            vL = vUv - vec2(texelSize.x, 0.0);\n            vR = vUv + vec2(texelSize.x, 0.0);\n            vT = vUv + vec2(0.0, texelSize.y);\n            vB = vUv - vec2(0.0, texelSize.y);\n            gl_Position = vec4(position, 0, 1);\n}";
},{}],"v7i7":[function(require,module,exports) {
module.exports="precision highp float;\nprecision highp sampler2D;\n#define GLSLIFY 1\n\n    varying vec2 vUv;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uSource;\n    uniform vec2 texelSize;\n    uniform float dt;\n    uniform float dissipation;\n    void main () {\n        vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n        gl_FragColor = dissipation * texture2D(uSource, coord);\n        gl_FragColor.a = 1.0;\n}";
},{}],"e5g1":[function(require,module,exports) {
module.exports="precision highp float;\nprecision highp sampler2D;\n#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D uVelocity;\nuniform sampler2D uSource;\nuniform vec2 texelSize;\nuniform vec2 dyeTexelSize;\nuniform float dt;\nuniform float dissipation;\n    vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n        vec2 st = uv / tsize - 0.5;\n        vec2 iuv = floor(st);\n        vec2 fuv = fract(st);\n        vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n        vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n        vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n        vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n        return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    }\n    \n    void main () {\n        vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n        gl_FragColor = dissipation * bilerp(uSource, coord, dyeTexelSize);\n        gl_FragColor.a = 1.0;\n    }";
},{}],"m4BC":[function(require,module,exports) {
module.exports="precision mediump float;\n    precision mediump sampler2D;\n#define GLSLIFY 1\n\n    varying highp vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float value;\n\n    void main () {\n\n        gl_FragColor = value * texture2D(uTexture, vUv);\n\n}";
},{}],"u5KS":[function(require,module,exports) {
module.exports="precision mediump float;\nprecision mediump sampler2D;\n#define GLSLIFY 1\nvarying highp vec2 vUv;\nvarying highp vec2 vL;\nvarying highp vec2 vR;\nvarying highp vec2 vT;\nvarying highp vec2 vB;\nuniform sampler2D uVelocity;\nvoid main () {\n    float L = texture2D(uVelocity, vL).y;\n    float R = texture2D(uVelocity, vR).y;\n    float T = texture2D(uVelocity, vT).x;\n    float B = texture2D(uVelocity, vB).x;\n    float vorticity = R - L - T + B;\n    gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n}";
},{}],"mUku":[function(require,module,exports) {
module.exports="precision mediump float;\nprecision mediump sampler2D;\n#define GLSLIFY 1\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uVelocity;\n    \n    void main () {\n        float L = texture2D(uVelocity, vL).x;\n        float R = texture2D(uVelocity, vR).x;\n        float T = texture2D(uVelocity, vT).y;\n        float B = texture2D(uVelocity, vB).y;\n        vec2 C = texture2D(uVelocity, vUv).xy;\n            if (vL.x < 0.0) { L = -C.x; }\n            if (vR.x > 1.0) { R = -C.x; }\n            if (vT.y > 1.0) { T = -C.y; }\n            if (vB.y < 0.0) { B = -C.y; }\n            float div = 0.5 * (R - L + T - B);\n        gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n}";
},{}],"Hpc8":[function(require,module,exports) {
module.exports="precision mediump float;\nprecision mediump sampler2D;\n#define GLSLIFY 1\nvarying highp vec2 vUv;\nvarying highp vec2 vL;\nvarying highp vec2 vR;\nvarying highp vec2 vT;\nvarying highp vec2 vB;\nuniform sampler2D uPressure;\nuniform sampler2D uVelocity;\nvoid main () {\n        float L = texture2D(uPressure, vL).x;\n        float R = texture2D(uPressure, vR).x;\n        float T = texture2D(uPressure, vT).x;\n        float B = texture2D(uPressure, vB).x;\n        vec2 velocity = texture2D(uVelocity, vUv).xy;\n        velocity.xy -= vec2(R - L, T - B);\n    gl_FragColor = vec4(velocity, 0.0, 1.0);\n}";
},{}],"pWIR":[function(require,module,exports) {
module.exports="precision mediump float;\nprecision mediump sampler2D;\n#define GLSLIFY 1\nvarying highp vec2 vUv;\nvarying highp vec2 vL;\nvarying highp vec2 vR;\nvarying highp vec2 vT;\nvarying highp vec2 vB;\nuniform sampler2D uPressure;\nuniform sampler2D uDivergence;\nvoid main () {\n    float L = texture2D(uPressure, vL).x;\n    float R = texture2D(uPressure, vR).x;\n    float T = texture2D(uPressure, vT).x;\n    float B = texture2D(uPressure, vB).x;\n    float C = texture2D(uPressure, vUv).x;\n    float divergence = texture2D(uDivergence, vUv).x;\n    float pressure = (L + R + B + T - divergence) * 0.25;\n    gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n}";
},{}],"igtw":[function(require,module,exports) {
module.exports="precision highp float;\nprecision highp sampler2D;\n#define GLSLIFY 1\n\n    varying vec2 vUv;\n    uniform sampler2D uTarget;\n    uniform float aspectRatio;\n    uniform sampler2D color;\n    // uniform vec2 point;\n    // uniform float radius;\n    \n    void main () {\n        // vec2 p = vUv - point.xy;\n        // p.x *= aspectRatio;\n        // vec3 splat = exp(-dot(p, p) / radius) * color; //replace this with optical flow\n        vec3 splat = texture2D(color, vUv).xyz; //replace this with optical flow\n        vec3 base = texture2D(uTarget, vUv).xyz;\n        gl_FragColor = vec4(base + splat, 1.0);\n}";
},{}],"IIjw":[function(require,module,exports) {
module.exports="precision highp float;\nprecision highp sampler2D;\n#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vL;\nvarying vec2 vR;\nvarying vec2 vT;\nvarying vec2 vB;\nuniform sampler2D uVelocity;\nuniform sampler2D uCurl;\nuniform float curl;\nuniform float dt;\nvoid main () {\n    float L = texture2D(uCurl, vL).x;\n    float R = texture2D(uCurl, vR).x;\n    float T = texture2D(uCurl, vT).x;\n    float B = texture2D(uCurl, vB).x;\n    float C = texture2D(uCurl, vUv).x;\n    vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n    force /= length(force) + 0.0001;\n    force *= curl * C;\n    force.y *= -1.0;\n    vec2 vel = texture2D(uVelocity, vUv).xy;\n    gl_FragColor = vec4(vel + force * dt, 0.0, 1.0);\n}";
},{}],"l2fU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../vendors/ogl/src/core/Program"),r=require("../../Vendors/ogl/src/core/Texture"),t=require("../../Vendors/ogl/src/core/Mesh"),i=require("../../Vendors/ogl/src/core/RenderTarget"),s=require("../../Vendors/ogl/src/math/Vec2"),a=require("../../Vendors/ogl/src/core/Geometry");function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}var u=require("./shaders/baseVertex.vert"),h=require("./shaders/advection.frag"),g=require("./shaders/advectionManualFiltering.frag"),m=require("./shaders/clear.frag"),d=require("./shaders/curl.frag"),p=require("./shaders/divergence.frag"),c=require("./shaders/gradientSubtract.frag"),v=require("./shaders/pressure.frag"),f=require("./shaders/splat.frag"),F=require("./shaders/vorticity.frag"),y=function(){function n(e){o(this,n),this.gl=e,this.initSimParams(),this.initSimulationPrograms()}return l(n,[{key:"initSimParams",value:function(){this.simRes=256,this.dyeRes=512,this.texelSize=new s.Vec2(1/this.simRes),this.simParams={iterations:4,densityDissipation:.98,velocityDissipation:.98,pressureDissipation:.9,curlStrength:.01,radius:.2}}},{key:"initSimulationPrograms",value:function(){var o,n,l,y=this.gl.renderer.extensions["OES_texture_".concat(this.gl.renderer.isWebgl2?"":"half_","float_linear")],P=this.gl.renderer.isWebgl2?this.gl.HALF_FLOAT:this.gl.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES,T=y?this.gl.LINEAR:this.gl.NEAREST;this.gl.renderer.isWebgl2?(o=this.getSupportedFormat(this.gl,this.gl.RGBA16F,this.gl.RGBA,P),n=this.getSupportedFormat(this.gl,this.gl.RG16F,this.gl.RG,P),l=this.getSupportedFormat(this.gl,this.gl.R16F,this.gl.RED,P)):(n=o=this.getSupportedFormat(this.gl,this.gl.RGBA,this.gl.RGBA,P),l=o),this.densityFBO=this.createPingPongBuffer({width:this.dyeRes,height:this.dyeRes,type:P,format:o.format,internalFormat:o.internalFormat,minFilter:T,depth:!1}),this.velocityFBO=this.createPingPongBuffer({width:this.simRes,height:this.simRes,type:P,format:n.format,internalFormat:n.internalFormat,minFilter:T,depth:!1}),this.pressureFBO=this.createPingPongBuffer({width:this.simRes,height:this.simRes,type:P,format:l.format,internalFormat:l.internalFormat,minFilter:this.gl.NEAREST,depth:!1}),this.divergence=new i.RenderTarget(this.gl,{width:this.simRes,height:this.simRes,type:P,format:l.format,internalFormat:l.internalFormat,minFilter:this.gl.NEAREST,depth:!1}),this.curl=new i.RenderTarget(this.gl,{width:this.simRes,height:this.simRes,type:P,format:l.format,internalFormat:l.internalFormat,minFilter:this.gl.NEAREST,depth:!1});var R=new a.Geometry(this.gl,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),x={texelSize:{value:this.texelSize},uTexture:{value:null},value:{value:this.simParams.pressureDissipation}};this.clearProgram=new t.Mesh(this.gl,{geometry:R,program:new e.Program(this.gl,{vertex:u,fragment:m,uniforms:x,depthTest:!1,depthWrite:!1})});var w={texelSize:{value:this.texelSize},uTarget:{value:null},aspectRatio:{value:1},color:{value:new r.Texture(this.gl)}};this.splatProgram=new t.Mesh(this.gl,{geometry:R,program:new e.Program(this.gl,{vertex:u,fragment:f,uniforms:w,depthTest:!1,depthWrite:!1})});var E={texelSize:{value:this.texelSize},dyeTexelSize:{value:new s.Vec2(1/this.dyeRes)},uVelocity:{value:null},uSource:{value:null},dt:{value:.016},dissipation:{value:1}};this.advectionProgram=new t.Mesh(this.gl,{geometry:R,program:new e.Program(this.gl,{vertex:u,fragment:y?h:g,uniforms:E,depthTest:!1,depthWrite:!1})});var S={texelSize:{value:this.texelSize},uVelocity:{value:null}};this.divergenceProgram=new t.Mesh(this.gl,{geometry:R,program:new e.Program(this.gl,{vertex:u,fragment:p,uniforms:S,depthTest:!1,depthWrite:!1})});var B={texelSize:{value:this.texelSize},uVelocity:{value:null}};this.curlProgram=new t.Mesh(this.gl,{geometry:R,program:new e.Program(this.gl,{vertex:u,fragment:d,uniforms:B,depthTest:!1,depthWrite:!1})});var O={texelSize:{value:this.texelSize},uVelocity:{value:null},uCurl:{value:null},curl:{value:this.simParams.curlStrength},dt:{value:.016}};this.vorticityProgram=new t.Mesh(this.gl,{geometry:R,program:new e.Program(this.gl,{vertex:u,fragment:F,uniforms:O,depthTest:!1,depthWrite:!1})});var _={texelSize:{value:this.texelSize},uPressure:{value:null},uDivergence:{value:null}};this.pressureProgram=new t.Mesh(this.gl,{geometry:R,program:new e.Program(this.gl,{vertex:u,fragment:v,uniforms:_,depthTest:!1,depthWrite:!1})});var A={texelSize:{value:this.texelSize},uPressure:{value:null},uVelocity:{value:null}};this.gradientSubtractProgram=new t.Mesh(this.gl,{geometry:R,program:new e.Program(this.gl,{vertex:u,fragment:c,uniforms:A,depthTest:!1,depthWrite:!1})})}},{key:"splat",value:function(e){var r=e.flowVectorTexture;this.splatProgram.program.uniforms.uTarget.value=this.velocityFBO.read.texture,this.splatProgram.program.uniforms.aspectRatio.value=this.gl.renderer.width/this.gl.renderer.height,this.splatProgram.program.uniforms.color.value=r,this.gl.renderer.render({scene:this.splatProgram,target:this.velocityFBO.write,sort:!1,update:!1}),this.velocityFBO.swap(),this.splatProgram.program.uniforms.uTarget.value=this.densityFBO.read.texture,this.gl.renderer.render({scene:this.splatProgram,target:this.densityFBO.write,sort:!1,update:!1}),this.densityFBO.swap()}},{key:"update",value:function(e){var r=e.flowVectorTexture;this.gl.renderer.autoClear=!1,this.splat({flowVectorTexture:r}),this.curlProgram.program.uniforms.uVelocity.value=this.velocityFBO.read.texture,this.gl.renderer.render({scene:this.curlProgram,target:this.curl,sort:!1,update:!1}),this.vorticityProgram.program.uniforms.uVelocity.value=this.velocityFBO.read.texture,this.vorticityProgram.program.uniforms.uCurl.value=this.curl.texture,this.gl.renderer.render({scene:this.vorticityProgram,target:this.velocityFBO.write,sort:!1,update:!1}),this.velocityFBO.swap(),this.divergenceProgram.program.uniforms.uVelocity.value=this.velocityFBO.read.texture,this.gl.renderer.render({scene:this.divergenceProgram,target:this.divergence,sort:!1,update:!1}),this.clearProgram.program.uniforms.uTexture.value=this.pressureFBO.read.texture,this.clearProgram.program.uniforms.value.value=this.simParams.pressureDissipation,this.gl.renderer.render({scene:this.clearProgram,target:this.pressureFBO.write,sort:!1,update:!1}),this.pressureFBO.swap(),this.pressureProgram.program.uniforms.uDivergence.value=this.divergence.texture;for(var t=0;t<this.simParams.iterations;t++)this.pressureProgram.program.uniforms.uPressure.value=this.pressureFBO.read.texture,this.gl.renderer.render({scene:this.pressureProgram,target:this.pressureFBO.write,sort:!1,update:!1}),this.pressureFBO.swap();this.gradientSubtractProgram.program.uniforms.uPressure.value=this.pressureFBO.read.texture,this.gradientSubtractProgram.program.uniforms.uVelocity.value=this.velocityFBO.read.texture,this.gl.renderer.render({scene:this.gradientSubtractProgram,target:this.velocityFBO.write,sort:!1,update:!1}),this.velocityFBO.swap(),this.advectionProgram.program.uniforms.dyeTexelSize.value.set(1/this.simRes),this.advectionProgram.program.uniforms.uVelocity.value=this.velocityFBO.read.texture,this.advectionProgram.program.uniforms.uSource.value=this.velocityFBO.read.texture,this.advectionProgram.program.uniforms.dissipation.value=this.simParams.velocityDissipation,this.gl.renderer.render({scene:this.advectionProgram,target:this.velocityFBO.write,sort:!1,update:!1}),this.velocityFBO.swap(),this.advectionProgram.program.uniforms.dyeTexelSize.value.set(1/this.dyeRes),this.advectionProgram.program.uniforms.uVelocity.value=this.velocityFBO.read.texture,this.advectionProgram.program.uniforms.uSource.value=this.densityFBO.read.texture,this.advectionProgram.program.uniforms.dissipation.value=this.simParams.densityDissipation,this.gl.renderer.render({scene:this.advectionProgram,target:this.densityFBO.write,sort:!1,update:!1}),this.densityFBO.swap(),this.gl.renderer.autoClear=!0}},{key:"createPingPongBuffer",value:function(e){var r=e.width,t=e.height,s=e.wrapS,a=e.wrapT,o=e.minFilter,n=void 0===o?this.gl.LINEAR:o,l=e.magFilter,u={width:r,height:t,wrapS:s,wrapT:a,minFilter:n,magFilter:void 0===l?n:l,type:e.type,format:e.format,internalFormat:e.internalFormat,depth:e.depth},h={read:new i.RenderTarget(this.gl,u),write:new i.RenderTarget(this.gl,u),swap:function(){var e=h.read;h.read=h.write,h.write=e}};return h}},{key:"supportRenderTextureFormat",value:function(e,r,t,i){var s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,r,4,4,0,t,i,null);var a=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.checkFramebufferStatus(e.FRAMEBUFFER)==e.FRAMEBUFFER_COMPLETE}},{key:"getSupportedFormat",value:function(e,r,t,i){if(!this.supportRenderTextureFormat(e,r,t,i))switch(r){case e.R16F:return this.getSupportedFormat(e,e.RG16F,e.RG,i);case e.RG16F:return this.getSupportedFormat(e,e.RGBA16F,e.RGBA,i);default:return null}return{internalFormat:r,format:t}}},{key:"FluidOutput",get:function(){return this.densityFBO.read.texture}}]),n}();exports.default=y;
},{"../../vendors/ogl/src/core/Program":"RXYf","../../Vendors/ogl/src/core/Texture":"l0rf","../../Vendors/ogl/src/core/Mesh":"j0Iy","../../Vendors/ogl/src/core/RenderTarget":"tutl","../../Vendors/ogl/src/math/Vec2":"o05s","../../Vendors/ogl/src/core/Geometry":"oGkT","./shaders/baseVertex.vert":"quAm","./shaders/advection.frag":"v7i7","./shaders/advectionManualFiltering.frag":"e5g1","./shaders/clear.frag":"m4BC","./shaders/curl.frag":"u5KS","./shaders/divergence.frag":"mUku","./shaders/gradientSubtract.frag":"Hpc8","./shaders/pressure.frag":"pWIR","./shaders/splat.frag":"igtw","./shaders/vorticity.frag":"IIjw"}],"H99C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../vendors/ogl/src/core/Renderer"),t=require("../Vendors/ogl/src/core/Camera.js"),i=require("../Vendors/ogl/src/core/Transform.js"),n=require("../Vendors/ogl/src/extras/Orbit.js"),r=o(require("./Quad/index.js")),a=o(require("./Flow/index.js")),s=o(require("./Fluid/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c=function(){function o(){var r=this;u(this,o),h(this,"onResize",function(){var e=window.innerWidth,t=window.innerHeight,i=e/t;r.renderer.setSize(e,t),r.camera.perspective({aspect:i})}),this.renderer=new e.Renderer({width:window.innerWidth,height:window.innerHeight,antialias:!1}),this.gl=this.renderer.gl,this.gl.canvas.style.position="absolute",this.gl.clearColor(.96,.96,.96,1),this.gl.canvas.style.top="0",this.gl.canvas.style.left="0",this.gl.canvas.style.width="100%",this.gl.canvas.style.height="100%",this.gl.canvas.style.overflow="hidden",this.gl.canvas.style.zIndex="-1",document.body.appendChild(this.gl.canvas),this.scene=new i.Transform,this.camera=new t.Camera(this.gl,{fov:35,far:10,aspect:window.innerWidth/window.innerHeight}),this.orbitCamera=new n.Orbit(this.camera,{element:this.gl.canvas}),this.camera.position.z=5,this.initVideo(),this.initOpticalFlow(),this.initFluidSim(),this.initQuad(),this.initEvents(),this.start()}return d(o,[{key:"initVideo",value:function(){var e=this;this.streamAvailable=!1,this.video=document.createElement("video");navigator.mediaDevices.getUserMedia({audio:!1,video:{width:640,height:480}}).then(function(t){e.video.srcObject=t,e.video.play(),e.streamAvailable=!0}).catch(function(e){console.error("no camera found")})}},{key:"initOpticalFlow",value:function(){this.flow=new a.default(this.gl,{width:640,height:480})}},{key:"initFluidSim",value:function(){this.fluidSim=new s.default(this.gl)}},{key:"initQuad",value:function(){this.quad=new r.default(this.gl),this.quad.Output=this.flow.flowVectorTextureRead.texture,this.quad.setParent(this.scene)}},{key:"initEvents",value:function(){window.addEventListener("resize",this.onResize)}},{key:"start",value:function(){this.update()}},{key:"render",value:function(){this.renderer.render({scene:this.scene,camera:this.camera})}},{key:"update",value:function(){var e=this;window.requestAnimationFrame(function(){return e.update()}),this.streamAvailable&&(this.flow.update({inputVideo:this.video}),this.fluidSim.update({flowVectorTexture:this.flow.flowVectorTextureRead.texture}),this.quad.update({inputVideo:this.video}),this.quad.Output=this.fluidSim.FluidOutput),this.render()}}]),o}();exports.default=c;
},{"../vendors/ogl/src/core/Renderer":"xXG3","../Vendors/ogl/src/core/Camera.js":"NnPT","../Vendors/ogl/src/core/Transform.js":"hlVi","../Vendors/ogl/src/extras/Orbit.js":"dF3p","./Quad/index.js":"JZpG","./Flow/index.js":"kxLw","./Fluid/index.js":"l2fU"}],"vZyd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./index"));function o(e){return e&&e.__esModule?e:{default:e}}function n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}var t=function o(){n(this,o),console.log("this can't be...real? ◕_◕"),console.log("douglas@adventureclub.io"),console.log("douglas.lilliequist@gmail.com"),new e.default};exports.default=t,window.onload=function(){return new t};
},{"./index":"H99C"}]},{},["vZyd"], null)
//# sourceMappingURL=app.13093051.js.map